import{C as $e,D as Ke,E as Ze,F as Je,G as xi,H as bt,L as Ci,O as vt,P as yt,Q as _e,R as G,S as Si,T as Ei,U as Xe,V as Ye,Y as wi,Z as Ti,_ as xt,aa as Mi,ba as Ii,ea as Di,fa as Vi,ga as X,ha as Y,ia as ge,la as fe,ma as he,pa as Pi,qa as ki,sa as be,ta as U,ua as ee,w as pe,x as ne,y as de,z as ue}from"./chunk-CRB566ZZ.js";import{a as yi}from"./chunk-TU6FAO6K.js";import{i as te,j as z,l as ie,n as A,o as L,q as ce,r as gt,s as R,t as J,u as Q,v as ft,w as ht}from"./chunk-5QT4X2HY.js";import{Aa as Ue,Ba as q,Fa as I,Ia as gi,Ja as fi,Ka as _t,L as nt,La as jt,Pa as hi,Sa as bi,Ua as vi,b as mi,cb as N,db as F,ha as _i,j as He,k as pi,l as ut,m as di,r as ui,za as Rt}from"./chunk-DSH3YJ3B.js";import{$b as x,A as mt,Ab as a,Ac as Ne,Bb as o,Cb as f,Fb as pt,Gb as h,Ib as b,Jb as c,Kb as ei,La as Kt,Lb as ti,Ma as Ft,Mb as Bt,O as re,Ob as Te,Oc as li,Pb as ii,Qb as le,Qc as W,Ra as s,Rb as se,S as ae,Sa as Z,T as Qt,Ub as me,Uc as si,Vb as m,Vc as Ge,Wb as E,Wc as Me,X as Gt,Xb as ni,Y as S,Ya as P,Yc as k,Zb as v,_b as y,ac as O,bc as w,cb as V,cc as oi,db as Zt,ea as d,ec as ri,ed as ci,f as oe,fa as u,fd as Ot,gb as Jt,hd as dt,ia as Ut,ib as Xt,jb as _,jd as Wt,kd as At,l as qt,lc as j,md as Lt,na as ct,nc as ze,o as zt,oa as $t,oc as Qe,pc as ye,qb as Yt,qc as C,rb as p,sb as We,ub as H,vb as qe,wb as B,wc as xe,xc as ai,yb as Ee,yc as Ae,zb as we}from"./chunk-HM2FXCRC.js";import{a as D,b as K}from"./chunk-ODN5LVDJ.js";var Yi=["header"],en=["footer"],tn=["rejecticon"],nn=["accepticon"],on=["message"],rn=["icon"],an=["headless"],ln=[[["p-footer"]]],sn=["p-footer"],mn=(i,t,e)=>({$implicit:i,onAccept:t,onReject:e}),cn=i=>({$implicit:i});function pn(i,t){i&1&&pt(0)}function dn(i,t){if(i&1&&_(0,pn,1,0,"ng-container",6),i&2){let e=c(2);p("ngTemplateOutlet",e.headlessTemplate||e._headlessTemplate)("ngTemplateOutletContext",ri(2,mn,e.confirmation,e.onAccept.bind(e),e.onReject.bind(e)))}}function un(i,t){i&1&&_(0,dn,1,6,"ng-template",null,2,C)}function _n(i,t){i&1&&pt(0)}function gn(i,t){if(i&1&&(a(0,"div",7),_(1,_n,1,0,"ng-container",8),o()),i&2){let e=c(3);p("ngClass",e.cx("header")),s(),p("ngTemplateOutlet",e.headerTemplate||e._headerTemplate)}}function fn(i,t){i&1&&_(0,gn,2,2,"ng-template",null,4,C)}function hn(i,t){}function bn(i,t){i&1&&_(0,hn,0,0,"ng-template")}function vn(i,t){if(i&1&&_(0,bn,1,0,null,8),i&2){let e=c(3);p("ngTemplateOutlet",e.iconTemplate||e._iconTemplate)}}function yn(i,t){if(i&1&&f(0,"i",7),i&2){let e=c(4);qe(e.option("icon")),p("ngClass",e.cx("icon"))}}function xn(i,t){if(i&1&&_(0,yn,1,3,"i",11),i&2){let e=c(3);p("ngIf",e.option("icon"))}}function Cn(i,t){}function Sn(i,t){i&1&&_(0,Cn,0,0,"ng-template")}function En(i,t){if(i&1&&_(0,Sn,1,0,null,6),i&2){let e=c(3);p("ngTemplateOutlet",e.messageTemplate||e._messageTemplate)("ngTemplateOutletContext",oi(2,cn,e.confirmation))}}function wn(i,t){if(i&1&&f(0,"span",10),i&2){let e=c(3);p("ngClass",e.cx("message"))("innerHTML",e.option("message"),Kt)}}function Tn(i,t){if(i&1&&_(0,vn,1,1)(1,xn,1,1,"i",9)(2,En,1,4)(3,wn,1,2,"span",10),i&2){let e=c(2);B(e.iconTemplate||e._iconTemplate?0:!e.iconTemplate&&!e._iconTemplate&&!e._messageTemplate&&!e.messageTemplate?1:-1),s(2),B(e.messageTemplate||e._messageTemplate?2:3)}}function Mn(i,t){if(i&1&&_(0,fn,2,0)(1,Tn,4,2,"ng-template",null,3,C),i&2){let e=c();B(e.headerTemplate||e._headerTemplate?0:-1)}}function In(i,t){i&1&&pt(0)}function Dn(i,t){if(i&1&&(ti(0),_(1,In,1,0,"ng-container",8)),i&2){let e=c(2);s(),p("ngTemplateOutlet",e.footerTemplate||e._footerTemplate)}}function Vn(i,t){if(i&1&&f(0,"i"),i&2){let e=c(5);qe(e.option("rejectIcon"))}}function Pn(i,t){if(i&1&&_(0,Vn,1,2,"i",15),i&2){let e=c(4);p("ngIf",e.option("rejectIcon"))}}function kn(i,t){}function Nn(i,t){i&1&&_(0,kn,0,0,"ng-template")}function Hn(i,t){if(i&1){let e=h();a(0,"p-button",13),b("onClick",function(){d(e);let n=c(3);return u(n.onReject())}),_(1,Pn,1,1,"i",14)(2,Nn,1,0,null,8),o()}if(i&2){let e=c(3);p("label",e.rejectButtonLabel)("styleClass",e.getButtonStyleClass("pcRejectButton","rejectButtonStyleClass"))("ariaLabel",e.option("rejectButtonProps","ariaLabel"))("buttonProps",e.getRejectButtonProps()),s(),B(e.rejectIcon&&!e.rejectIconTemplate&&!e._rejectIconTemplate?1:-1),s(),p("ngTemplateOutlet",e.rejectIconTemplate||e._rejectIconTemplate)}}function Fn(i,t){if(i&1&&f(0,"i"),i&2){let e=c(5);qe(e.option("acceptIcon"))}}function Bn(i,t){if(i&1&&_(0,Fn,1,2,"i",15),i&2){let e=c(4);p("ngIf",e.option("acceptIcon"))}}function On(i,t){}function Wn(i,t){i&1&&_(0,On,0,0,"ng-template")}function An(i,t){if(i&1){let e=h();a(0,"p-button",13),b("onClick",function(){d(e);let n=c(3);return u(n.onAccept())}),_(1,Bn,1,1,"i",14)(2,Wn,1,0,null,8),o()}if(i&2){let e=c(3);p("label",e.acceptButtonLabel)("styleClass",e.getButtonStyleClass("pcAcceptButton","acceptButtonStyleClass"))("ariaLabel",e.option("acceptButtonProps","ariaLabel"))("buttonProps",e.getAcceptButtonProps()),s(),B(e.acceptIcon&&!e._acceptIconTemplate&&!e.acceptIconTemplate?1:-1),s(),p("ngTemplateOutlet",e.acceptIconTemplate||e._acceptIconTemplate)}}function Ln(i,t){if(i&1&&_(0,Hn,3,6,"p-button",12)(1,An,3,6,"p-button",12),i&2){let e=c(2);p("ngIf",e.option("rejectVisible")),s(),p("ngIf",e.option("acceptVisible"))}}function Rn(i,t){if(i&1&&_(0,Dn,2,1)(1,Ln,2,2),i&2){let e=c();B(e.footerTemplate||e._footerTemplate?0:-1),s(),B(!e.footerTemplate&&!e._footerTemplate?1:-1)}}var jn=({dt:i})=>`
.p-confirmdialog .p-dialog-content {
    display: flex;
    align-items: center;
    gap:  ${i("confirmdialog.content.gap")};
}

.p-confirmdialog .p-confirmdialog-icon {
    color: ${i("confirmdialog.icon.color")};
    font-size: ${i("confirmdialog.icon.size")};
    width: ${i("confirmdialog.icon.size")};
    height: ${i("confirmdialog.icon.size")};
}
`,qn={root:"p-confirmdialog",icon:"p-confirmdialog-icon",message:"p-confirmdialog-message",pcRejectButton:"p-confirmdialog-reject-button",pcAcceptButton:"p-confirmdialog-accept-button"},Ni=(()=>{class i extends hi{name="confirmdialog";theme=jn;classes=qn;static \u0275fac=(()=>{let e;return function(n){return(e||(e=Ut(i)))(n||i)}})();static \u0275prov=ae({token:i,factory:i.\u0275fac})}return i})();var zn=At([dt({transform:"{{transform}}",opacity:0}),Ot("{{transition}}",dt({transform:"none",opacity:1}))]),Qn=At([Ot("{{transition}}",dt({transform:"{{transform}}",opacity:0}))]),Pe=(()=>{class i extends bi{confirmationService;zone;header;icon;message;get style(){return this._style}set style(e){this._style=e,this.cd.markForCheck()}styleClass;maskStyleClass;acceptIcon;acceptLabel;closeAriaLabel;acceptAriaLabel;acceptVisible=!0;rejectIcon;rejectLabel;rejectAriaLabel;rejectVisible=!0;acceptButtonStyleClass;rejectButtonStyleClass;closeOnEscape=!0;dismissableMask;blockScroll=!0;rtl=!1;closable=!0;appendTo="body";key;autoZIndex=!0;baseZIndex=0;transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)";focusTrap=!0;defaultFocus="accept";breakpoints;get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0),this.cd.markForCheck()}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)";break}}draggable=!0;onHide=new ct;footer;_componentStyle=S(Ni);headerTemplate;footerTemplate;rejectIconTemplate;acceptIconTemplate;messageTemplate;iconTemplate;headlessTemplate;templates;_headerTemplate;_footerTemplate;_rejectIconTemplate;_acceptIconTemplate;_messageTemplate;_iconTemplate;_headlessTemplate;confirmation;_visible;_style;maskVisible;dialog;wrapper;contentContainer;subscription;preWidth;_position="center";transformOptions="scale(0.7)";styleElement;id=Rt("pn_id_");ariaLabelledBy=this.getAriaLabelledBy();translationSubscription;get containerClass(){return this.cx("root")+" "+this.styleClass||" "}constructor(e,r){super(),this.confirmationService=e,this.zone=r,this.subscription=this.confirmationService.requireConfirmation$.subscribe(n=>{if(!n){this.hide();return}n.key===this.key&&(this.confirmation=n,Object.keys(n).forEach(g=>{this[g]=n[g]}),this.confirmation.accept&&(this.confirmation.acceptEvent=new ct,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new ct,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0)})}ngOnInit(){super.ngOnInit(),this.breakpoints&&this.createStyle(),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.visible&&this.cd.markForCheck()})}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"header":this._headerTemplate=e.template;break;case"footer":this._footerTemplate=e.template;break;case"message":this._messageTemplate=e.template;break;case"icon":this._iconTemplate=e.template;break;case"rejecticon":this._rejectIconTemplate=e.template;break;case"accepticon":this._acceptIconTemplate=e.template;break;case"headless":this._headlessTemplate=e.template;break}})}getAriaLabelledBy(){return this.header!==null?Rt("pn_id_")+"_header":null}option(e,r){let n=this;if(n.hasOwnProperty(e))return r?n[r]:n[e]}getButtonStyleClass(e,r){let n=this.cx(e),l=this.option(r);return[n,l].filter(Boolean).join(" ")}getElementToFocus(){switch(this.option("defaultFocus")){case"accept":return nt(this.dialog.el.nativeElement,".p-confirm-dialog-accept");case"reject":return nt(this.dialog.el.nativeElement,".p-confirm-dialog-reject");case"close":return nt(this.dialog.el.nativeElement,".p-dialog-header-close");case"none":return null;default:return nt(this.dialog.el.nativeElement,".p-confirm-dialog-accept")}}createStyle(){if(!this.styleElement){this.styleElement=this.document.createElement("style"),this.styleElement.type="text/css",this.document.head.appendChild(this.styleElement);let e="";for(let r in this.breakpoints)e+=`
                    @media screen and (max-width: ${r}) {
                        .p-dialog[${this.id}] {
                            width: ${this.breakpoints[r]} !important;
                        }
                    }
                `;this.styleElement.innerHTML=e,_i(this.styleElement,"nonce",this.config?.csp()?.nonce)}}close(){this.confirmation?.rejectEvent&&this.confirmation.rejectEvent.emit(Ue.CANCEL),this.hide(Ue.CANCEL)}hide(e){this.onHide.emit(e),this.visible=!1,this.unsubscribeConfirmationEvents(),this.confirmation=null}destroyStyle(){this.styleElement&&(this.document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.subscription.unsubscribe(),this.unsubscribeConfirmationEvents(),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.destroyStyle(),super.ngOnDestroy()}onVisibleChange(e){e?this.visible=e:this.close()}onAccept(){this.confirmation&&this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide(Ue.ACCEPT)}onReject(){this.confirmation&&this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(Ue.REJECT),this.hide(Ue.REJECT)}unsubscribeConfirmationEvents(){this.confirmation&&(this.confirmation.acceptEvent?.unsubscribe(),this.confirmation.rejectEvent?.unsubscribe())}get acceptButtonLabel(){return this.option("acceptLabel")||this.config.getTranslation(jt.ACCEPT)}get rejectButtonLabel(){return this.option("rejectLabel")||this.config.getTranslation(jt.REJECT)}getAcceptButtonProps(){return this.option("acceptButtonProps")}getRejectButtonProps(){return this.option("rejectButtonProps")}static \u0275fac=function(r){return new(r||i)(Z(q),Z($t))};static \u0275cmp=V({type:i,selectors:[["p-confirmDialog"],["p-confirmdialog"],["p-confirm-dialog"]],contentQueries:function(r,n,l){if(r&1&&(Te(l,gi,5),Te(l,Yi,4),Te(l,en,4),Te(l,tn,4),Te(l,nn,4),Te(l,on,4),Te(l,rn,4),Te(l,an,4),Te(l,fi,4)),r&2){let g;le(g=se())&&(n.footer=g.first),le(g=se())&&(n.headerTemplate=g.first),le(g=se())&&(n.footerTemplate=g.first),le(g=se())&&(n.rejectIconTemplate=g.first),le(g=se())&&(n.acceptIconTemplate=g.first),le(g=se())&&(n.messageTemplate=g.first),le(g=se())&&(n.iconTemplate=g.first),le(g=se())&&(n.headlessTemplate=g.first),le(g=se())&&(n.templates=g)}},inputs:{header:"header",icon:"icon",message:"message",style:"style",styleClass:"styleClass",maskStyleClass:"maskStyleClass",acceptIcon:"acceptIcon",acceptLabel:"acceptLabel",closeAriaLabel:"closeAriaLabel",acceptAriaLabel:"acceptAriaLabel",acceptVisible:[2,"acceptVisible","acceptVisible",xe],rejectIcon:"rejectIcon",rejectLabel:"rejectLabel",rejectAriaLabel:"rejectAriaLabel",rejectVisible:[2,"rejectVisible","rejectVisible",xe],acceptButtonStyleClass:"acceptButtonStyleClass",rejectButtonStyleClass:"rejectButtonStyleClass",closeOnEscape:[2,"closeOnEscape","closeOnEscape",xe],dismissableMask:[2,"dismissableMask","dismissableMask",xe],blockScroll:[2,"blockScroll","blockScroll",xe],rtl:[2,"rtl","rtl",xe],closable:[2,"closable","closable",xe],appendTo:"appendTo",key:"key",autoZIndex:[2,"autoZIndex","autoZIndex",xe],baseZIndex:[2,"baseZIndex","baseZIndex",ai],transitionOptions:"transitionOptions",focusTrap:[2,"focusTrap","focusTrap",xe],defaultFocus:"defaultFocus",breakpoints:"breakpoints",visible:"visible",position:"position",draggable:[2,"draggable","draggable",xe]},outputs:{onHide:"onHide"},features:[O([Ni]),Xt,Jt],ngContentSelectors:sn,decls:6,vars:14,consts:[["dialog",""],["footer",""],["headless",""],["content",""],["header",""],["role","alertdialog",3,"visibleChange","visible","closable","styleClass","modal","header","closeOnEscape","blockScroll","appendTo","position","dismissableMask","draggable"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],[4,"ngTemplateOutlet"],[3,"ngClass","class"],[3,"ngClass","innerHTML"],[3,"ngClass","class",4,"ngIf"],[3,"label","styleClass","ariaLabel","buttonProps","onClick",4,"ngIf"],[3,"onClick","label","styleClass","ariaLabel","buttonProps"],[3,"class"],[3,"class",4,"ngIf"]],template:function(r,n){if(r&1){let l=h();ei(ln),a(0,"p-dialog",5,0),b("visibleChange",function(Ve){return d(l),u(n.onVisibleChange(Ve))}),_(2,un,2,0)(3,Mn,3,1)(4,Rn,2,2,"ng-template",null,1,C),o()}r&2&&(H(n.style),p("visible",n.visible)("closable",n.option("closable"))("styleClass",n.containerClass)("modal",!0)("header",n.option("header"))("closeOnEscape",n.option("closeOnEscape"))("blockScroll",n.option("blockScroll"))("appendTo",n.option("appendTo"))("position",n.position)("dismissableMask",n.dismissableMask)("draggable",n.draggable),s(2),B(n.headlessTemplate||n._headlessTemplate?2:3))},dependencies:[k,li,W,si,N,U,_t],encapsulation:2,data:{animation:[ci("animation",[Wt("void => visible",[Lt(zn)]),Wt("visible => void",[Lt(Qn)])])]},changeDetection:0})}return i})(),Fe=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=Zt({type:i});static \u0275inj=Qt({imports:[Pe,_t,_t]})}return i})();var Gn=["dt"],Un=()=>["name","country.name","representative.name","status"],$n=()=>({"min-width":"75rem"}),Kn=()=>[10,20,30],Hi=()=>({width:"450px"});function Zn(i,t){if(i&1){let e=h();a(0,"p-button",11),b("onClick",function(){d(e);let n=c();return u(n.openNew())}),o(),a(1,"p-button",12),b("onClick",function(){d(e);let n=c();return u(n.deleteSelectedProducts())}),o()}if(i&2){let e=c();s(),p("disabled",!e.selectedProducts||!e.selectedProducts.length)}}function Jn(i,t){if(i&1){let e=h();a(0,"p-button",13),b("onClick",function(){d(e);let n=c();return u(n.exportCSV())}),o()}}function Xn(i,t){if(i&1){let e=h();a(0,"div",14)(1,"h5",15),m(2,"Manage Products"),o(),a(3,"p-iconfield"),f(4,"p-inputicon",16),a(5,"input",17),b("input",function(n){d(e);let l=c(),g=me(6);return u(l.onGlobalFilter(g,n))}),o()()()}}function Yn(i,t){i&1&&(a(0,"tr")(1,"th",18),f(2,"p-tableHeaderCheckbox"),o(),a(3,"th",19),m(4,"Code"),o(),a(5,"th",20),m(6," Name "),f(7,"p-sortIcon",21),o(),a(8,"th"),m(9,"Image"),o(),a(10,"th",22),m(11," Price "),f(12,"p-sortIcon",23),o(),a(13,"th",24),m(14," Category "),f(15,"p-sortIcon",25),o(),a(16,"th",26),m(17," Reviews "),f(18,"p-sortIcon",27),o(),a(19,"th",28),m(20," Status "),f(21,"p-sortIcon",29),o(),f(22,"th",30),o())}function eo(i,t){if(i&1){let e=h();a(0,"tr")(1,"td",18),f(2,"p-tableCheckbox",31),o(),a(3,"td",30),m(4),o(),a(5,"td",19),m(6),o(),a(7,"td"),f(8,"img",32),o(),a(9,"td"),m(10),j(11,"currency"),o(),a(12,"td"),m(13),o(),a(14,"td")(15,"p-rating",33),x("ngModelChange",function(n){let l=d(e).$implicit;return y(l.rating,n)||(l.rating=n),u(n)}),o()(),a(16,"td"),f(17,"p-tag",34),o(),a(18,"td")(19,"p-button",35),b("click",function(){let n=d(e).$implicit,l=c();return u(l.editProduct(n))}),o(),a(20,"p-button",36),b("click",function(){let n=d(e).$implicit,l=c();return u(l.deleteProduct(n))}),o()()()}if(i&2){let e=t.$implicit,r=c();s(2),p("value",e),s(2),E(e.code),s(2),E(e.name),s(2),p("src","https://primefaces.org/cdn/primeng/images/demo/product/"+e.image,Ft)("alt",e.name),s(2),E(ze(11,15,e.price,"USD")),s(3),E(e.category),s(2),v("ngModel",e.rating),p("readonly",!0),s(2),p("value",e.inventoryStatus)("severity",r.getSeverity(e.inventoryStatus)),s(2),p("rounded",!0)("outlined",!0),s(),p("rounded",!0)("outlined",!0)}}function to(i,t){if(i&1&&f(0,"img",46),i&2){let e=c(2);p("src","https://primefaces.org/cdn/primeng/images/demo/product/"+e.product.image,Ft)("alt",e.product.image)}}function io(i,t){i&1&&(a(0,"small",47),m(1,"Name is required."),o())}function no(i,t){if(i&1){let e=h();a(0,"div",37),_(1,to,1,2,"img",38),a(2,"div")(3,"label",39),m(4,"Name"),o(),a(5,"input",40),x("ngModelChange",function(n){d(e);let l=c();return y(l.product.name,n)||(l.product.name=n),u(n)}),o(),_(6,io,2,0,"small",41),o(),a(7,"div")(8,"label",42),m(9,"Description"),o(),a(10,"textarea",43),x("ngModelChange",function(n){d(e);let l=c();return y(l.product.description,n)||(l.product.description=n),u(n)}),o()(),a(11,"div")(12,"label",44),m(13,"Inventory Status"),o(),a(14,"p-select",45),x("ngModelChange",function(n){d(e);let l=c();return y(l.product.inventoryStatus,n)||(l.product.inventoryStatus=n),u(n)}),o()()()}if(i&2){let e=c();s(),p("ngIf",e.product.image),s(4),v("ngModel",e.product.name),s(),p("ngIf",e.submitted&&!e.product.name),s(4),v("ngModel",e.product.description),s(4),v("ngModel",e.product.inventoryStatus),p("options",e.statuses)("appendTo","body")}}function oo(i,t){if(i&1){let e=h();a(0,"p-button",48),b("click",function(){d(e);let n=c();return u(n.hideDialog())}),o(),a(1,"p-button",49),b("click",function(){d(e);let n=c();return u(n.saveProduct())}),o()}}var St=class i{constructor(t,e,r){this.productService=t;this.messageService=e;this.confirmationService=r}productDialog=!1;products=P([]);product;selectedProducts;submitted=!1;statuses;dt;exportColumns;cols;exportCSV(){this.dt.exportCSV()}ngOnInit(){this.loadDemoData()}loadDemoData(){this.productService.getProducts().then(t=>{this.products.set(t)}),this.statuses=[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}],this.cols=[{field:"code",header:"Code",customExportHeader:"Product Code"},{field:"name",header:"Name"},{field:"image",header:"Image"},{field:"price",header:"Price"},{field:"category",header:"Category"}],this.exportColumns=this.cols.map(t=>({title:t.header,dataKey:t.field}))}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}openNew(){this.product={},this.submitted=!1,this.productDialog=!0}editProduct(t){this.product=D({},t),this.productDialog=!0}deleteSelectedProducts(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected products?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products.set(this.products().filter(t=>!this.selectedProducts?.includes(t))),this.selectedProducts=null,this.messageService.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})}})}hideDialog(){this.productDialog=!1,this.submitted=!1}deleteProduct(t){this.confirmationService.confirm({message:"Are you sure you want to delete "+t.name+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products.set(this.products().filter(e=>e.id!==t.id)),this.product={},this.messageService.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})}})}findIndexById(t){let e=-1;for(let r=0;r<this.products().length;r++)if(this.products()[r].id===t){e=r;break}return e}createId(){let t="";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<5;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}getSeverity(t){switch(t){case"INSTOCK":return"success";case"LOWSTOCK":return"warn";case"OUTOFSTOCK":return"danger";default:return"info"}}saveProduct(){this.submitted=!0;let t=this.products();this.product.name?.trim()&&(this.product.id?(t[this.findIndexById(this.product.id)]=this.product,this.products.set([...t]),this.messageService.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):(this.product.id=this.createId(),this.product.image="product-placeholder.svg",this.messageService.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3}),this.products.set([...t,this.product])),this.productDialog=!1,this.product={})}static \u0275fac=function(e){return new(e||i)(Z(xt),Z(I),Z(q))};static \u0275cmp=V({type:i,selectors:[["app-crud"]],viewQuery:function(e,r){if(e&1&&ii(Gn,5),e&2){let n;le(n=se())&&(r.dt=n.first)}},features:[O([I,xt,q])],decls:19,vars:21,consts:[["start",""],["end",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} products",3,"selectionChange","value","rows","columns","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","rowsPerPageOptions"],["header","Product Details",3,"visibleChange","visible","modal"],["label","New","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],["severity","secondary","label","Delete","icon","pi pi-trash","outlined","",3,"onClick","disabled"],["label","Export","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],[2,"width","3rem"],[2,"min-width","16rem"],["pSortableColumn","name",2,"min-width","16rem"],["field","name"],["pSortableColumn","price",2,"min-width","8rem"],["field","price"],["pSortableColumn","category",2,"min-width","10rem"],["field","category"],["pSortableColumn","rating",2,"min-width","12rem"],["field","rating"],["pSortableColumn","inventoryStatus",2,"min-width","12rem"],["field","inventoryStatus"],[2,"min-width","12rem"],[3,"value"],[1,"rounded",2,"width","64px",3,"src","alt"],[3,"ngModelChange","ngModel","readonly"],[3,"value","severity"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],["icon","pi pi-trash","severity","danger",3,"click","rounded","outlined"],[1,"flex","flex-col","gap-6"],["class","block m-auto pb-4",3,"src","alt",4,"ngIf"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],["for","description",1,"block","font-bold","mb-3"],["id","description","pTextarea","","required","","rows","3","cols","20","fluid","",3,"ngModelChange","ngModel"],["for","inventoryStatus",1,"block","font-bold","mb-3"],["inputId","inventoryStatus","optionLabel","label","optionValue","label","placeholder","Select a Status","fluid","",3,"ngModelChange","ngModel","options","appendTo"],[1,"block","m-auto","pb-4",3,"src","alt"],[1,"text-red-500"],["label","Cancel","icon","pi pi-times","text","",3,"click"],["label","Save","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let n=h();a(0,"p-toolbar",8),_(1,Zn,2,1,"ng-template",null,0,C)(3,Jn,1,0,"ng-template",null,1,C),o(),a(5,"p-table",9,2),x("selectionChange",function(g){return d(n),y(r.selectedProducts,g)||(r.selectedProducts=g),u(g)}),_(7,Xn,6,0,"ng-template",null,3,C)(9,Yn,23,0,"ng-template",null,4,C)(11,eo,21,18,"ng-template",null,5,C),o(),a(13,"p-dialog",10),x("visibleChange",function(g){return d(n),y(r.productDialog,g)||(r.productDialog=g),u(g)}),_(14,no,15,7,"ng-template",null,6,C)(16,oo,2,0,"ng-template",null,7,C),o(),f(18,"p-confirmdialog")}e&2&&(s(5),p("value",r.products())("rows",10)("columns",r.cols)("paginator",!0)("globalFilterFields",w(16,Un))("tableStyle",w(17,$n)),v("selection",r.selectedProducts),p("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",w(18,Kn)),s(8),H(w(19,Hi)),v("visible",r.productDialog),p("modal",!0),s(5),H(w(20,Hi)))},dependencies:[k,W,Me,be,ge,fe,he,Pi,ki,R,ie,A,ce,L,F,N,vi,z,Y,X,Ei,Si,Q,J,Je,Ze,Ke,$e,bt,G,ee,U,Ti,wi,ue,de,ne,pe,Fe,Pe],encapsulation:2})};var De=class i{constructor(t){this.http=t}baseUrl=yi.festanabApi;get(t,e){return this.http.get(`${this.baseUrl}/${t}`,{params:e}).pipe(mt(this.handleError))}post(t,e,r){return this.http.post(`${this.baseUrl}/${t}`,e,{headers:r}).pipe(mt(this.handleError))}delete(t,e){return this.http.delete(`${this.baseUrl}/${t}`,{headers:e}).pipe(mt(this.handleError))}handleError(t){return console.error("API error:",t),qt(()=>t)}static \u0275fac=function(e){return new(e||i)(Gt(mi))};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var et=class i{PATH="inventory";apiService=S(De);constructor(){}getAllInventory(){return this.apiService.get(`${this.PATH}/get-inventory`)}addNewProduct(t){return this.apiService.post(`${this.PATH}/add-edit-item`,{_id:t._id||void 0,name:t.name,quantity:t.quantity,rentalPrice:t.rentalPrice})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var ro=()=>["name"],ao=()=>({"min-width":"75rem"}),lo=()=>[10,20,30],so=()=>({width:"450px"});function mo(i,t){if(i&1){let e=h();a(0,"p-button",12),b("onClick",function(){d(e);let n=c();return u(n.openNew())}),o()}}function co(i,t){if(i&1){let e=h();a(0,"div",13)(1,"h5",14),m(2,"Administrar Inventario"),o(),a(3,"p-iconfield"),f(4,"p-inputicon",15),a(5,"input",16),b("input",function(n){d(e);let l=c(),g=me(8);return u(l.onGlobalFilter(g,n))}),o()()()}}function po(i,t){i&1&&(a(0,"tr")(1,"th",17),m(2," Nombre "),f(3,"p-sortIcon",18),o(),a(4,"th",19),m(5," Cantidad "),f(6,"p-sortIcon",20),o(),a(7,"th",21),m(8," Precio Alquiler "),f(9,"p-sortIcon",22),o(),f(10,"th",23),o())}function uo(i,t){if(i&1){let e=h();a(0,"tr")(1,"td",23),m(2),o(),a(3,"td",24),m(4),o(),a(5,"td"),m(6),j(7,"currency"),o(),a(8,"td")(9,"p-button",25),b("click",function(){let n=d(e).$implicit,l=c();return u(l.editProduct(n))}),o()()()}if(i&2){let e=t.$implicit;s(2),E(e.name),s(2),E(e.quantity),s(2),E(ye(7,5,e.rentalPrice,"COP","symbol","1.0-0")),s(3),p("rounded",!0)("outlined",!0)}}function _o(i,t){i&1&&(a(0,"small",36),m(1,"Nombre es requerido."),o())}function go(i,t){i&1&&(a(0,"small",36),m(1,"Precio Alquiler es requerido."),o())}function fo(i,t){i&1&&(a(0,"small",36),m(1,"Cantidad es requerida."),o())}function ho(i,t){if(i&1){let e=h();a(0,"div",26)(1,"div")(2,"label",27),m(3,"Nombre"),o(),a(4,"input",28),x("ngModelChange",function(n){d(e);let l=c();return y(l.product.name,n)||(l.product.name=n),u(n)}),o(),_(5,_o,2,0,"small",29),o(),a(6,"div",30)(7,"div",31)(8,"label",32),m(9,"Precio Alquiler"),o(),a(10,"p-inputnumber",33),x("ngModelChange",function(n){d(e);let l=c();return y(l.product.rentalPrice,n)||(l.product.rentalPrice=n),u(n)}),o(),_(11,go,2,0,"small",29),o(),a(12,"div",31)(13,"label",34),m(14,"Cantidad"),o(),a(15,"p-inputnumber",35),x("ngModelChange",function(n){d(e);let l=c();return y(l.product.quantity,n)||(l.product.quantity=n),u(n)}),o(),_(16,fo,2,0,"small",29),o()()()}if(i&2){let e=c();s(4),v("ngModel",e.product.name),s(),p("ngIf",e.submitted&&!e.product.name),s(5),v("ngModel",e.product.rentalPrice),p("minFractionDigits",0),s(),p("ngIf",e.submitted&&!e.product.rentalPrice),s(4),v("ngModel",e.product.quantity),s(),p("ngIf",e.submitted&&!e.product.quantity)}}function bo(i,t){if(i&1){let e=h();a(0,"p-button",37),b("click",function(){d(e);let n=c();return u(n.hideDialog())}),o(),a(1,"p-button",38),b("click",function(){d(e);let n=c();return u(n.saveProduct())}),o()}}var Et=class i{constructor(t,e){this.service=t;this.confirmationService=e}submitted=!1;product;productDialog=!1;products=P([]);cols;destroy$=new oe;inventoryService=S(et);ngOnInit(){this.loadData(),this.getAllInventory()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openNew(){this.product={},this.submitted=!1,this.productDialog=!0}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}hideDialog(){this.productDialog=!1,this.submitted=!1}saveProduct(){this.submitted=!0;let t=this.products();!this.product.name?.trim()||!this.product.quantity||!this.product.rentalPrice||this.inventoryService.addNewProduct(this.product).subscribe({next:e=>{this.service.add({severity:"success",summary:"Successful",detail:"Producto guardado correctamente.",life:3e3}),t.some(n=>n._id===e.data._id)?t=t.map(n=>n._id===e.data._id?e.data:n):t.push(e.data),this.products.set([...t])},error:()=>{this.service.add({severity:"error",summary:"Error",detail:"No se pudo guardar el producto."})},complete:()=>{this.productDialog=!1,this.product={}}})}editProduct(t){this.product=D({},t),this.productDialog=!0}deleteProduct(t){this.confirmationService.confirm({message:"\xBFEstas seguro de eliminar "+t.name+"?",header:"Confirmar",acceptLabel:"Si",rejectLabel:"No",icon:"pi pi-exclamation-triangle",accept:()=>{this.product={},this.service.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})}})}loadData(){this.cols=[{field:"name",header:"Nombre"},{field:"quantity",header:"Cantidad"},{field:"rentalPrice",header:"Precio Alquiler"}]}getAllInventory(){this.inventoryService.getAllInventory().pipe(re(this.destroy$)).subscribe({next:t=>{this.products.set(t.data)},error:()=>{this.service.add({severity:"error",summary:"Error",detail:"No se pudo cargar el inventario."})}})}static \u0275fac=function(e){return new(e||i)(Z(I),Z(q))};static \u0275cmp=V({type:i,selectors:[["app-inventory"]],features:[O([I,q])],decls:20,vars:17,consts:[["start",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],[1,"card"],[1,"font-semibold","text-xl","mb-4"],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Mostrando {first} hasta {last} de {totalRecords} productos",3,"value","rows","columns","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport","rowsPerPageOptions"],["header","Detalle del Producto",3,"visibleChange","visible","modal"],["label","Nuevo producto","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pSortableColumn","name",2,"min-width","16rem"],["field","name"],["pSortableColumn","quantity",2,"min-width","12rem"],["field","quantity"],["pSortableColumn","rentalPrice",2,"min-width","8rem"],["field","price"],[2,"min-width","12rem"],[2,"min-width","16rem"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],[1,"flex","flex-col","gap-6"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-6"],["for","price",1,"block","font-bold","mb-3"],["id","price","mode","currency","currency","COP","fluid","",3,"ngModelChange","ngModel","minFractionDigits"],["for","quantity",1,"block","font-bold","mb-3"],["id","quantity","fluid","",3,"ngModelChange","ngModel"],[1,"text-red-500"],["label","Cancelar","icon","pi pi-times","text","",3,"click"],["label","Guardar","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let n=h();f(0,"p-toast"),a(1,"div",7)(2,"div",8),m(3,"Inventario"),o(),a(4,"p-toolbar",9),_(5,mo,1,0,"ng-template",null,0,C),o(),a(7,"p-table",10,1),_(9,co,6,0,"ng-template",null,2,C)(11,po,11,0,"ng-template",null,3,C)(13,uo,10,10,"ng-template",null,4,C),o(),a(15,"p-dialog",11),x("visibleChange",function(g){return d(n),y(r.productDialog,g)||(r.productDialog=g),u(g)}),_(16,ho,17,7,"ng-template",null,5,C)(18,bo,2,0,"ng-template",null,6,C),o()()}e&2&&(s(7),p("value",r.products())("rows",10)("columns",r.cols)("paginator",!0)("globalFilterFields",w(13,ro))("tableStyle",w(14,ao))("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",w(15,lo)),s(8),H(w(16,so)),v("visible",r.productDialog),p("modal",!0))},dependencies:[k,W,Me,F,N,Q,J,be,ge,fe,he,Y,X,ne,pe,ue,de,G,_e,ee,U,R,ie,A,ce,L,z,te],encapsulation:2})};var it=class i{PATH="employee";apiService=S(De);constructor(){}getAllEmployee(){return this.apiService.get(`${this.PATH}/get-employees`)}addEditEmployee(t){return this.apiService.post(`${this.PATH}/add-edit-employee`,{_id:t._id||void 0,name:t.name,hourPrice:t.hourPrice,cc:t.cc})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var vo=()=>["name","cc"],yo=()=>({"min-width":"75rem"}),xo=()=>[10,20,30],Co=()=>({width:"450px"});function So(i,t){if(i&1){let e=h();a(0,"p-button",12),b("onClick",function(){d(e);let n=c();return u(n.openNew())}),o()}}function Eo(i,t){if(i&1){let e=h();a(0,"div",13)(1,"h5",14),m(2,"Administrar Empleados"),o(),a(3,"p-iconfield"),f(4,"p-inputicon",15),a(5,"input",16),b("input",function(n){d(e);let l=c(),g=me(8);return u(l.onGlobalFilter(g,n))}),o()()()}}function wo(i,t){i&1&&(a(0,"tr")(1,"th",17),m(2," Nombre "),f(3,"p-sortIcon",18),o(),a(4,"th",19),m(5," C\xE9dula "),f(6,"p-sortIcon",20),o(),a(7,"th",21),m(8," Precio Hora "),f(9,"p-sortIcon",22),o(),f(10,"th",23),o())}function To(i,t){if(i&1){let e=h();a(0,"tr")(1,"td",23),m(2),o(),a(3,"td",24),m(4),o(),a(5,"td"),m(6),j(7,"currency"),o(),a(8,"td")(9,"p-button",25),b("click",function(){let n=d(e).$implicit,l=c();return u(l.editEmployee(n))}),o()()()}if(i&2){let e=t.$implicit;s(2),E(e.name),s(2),E(e.cc),s(2),E(ye(7,5,e.hourPrice,"COP","symbol","1.0-0")),s(3),p("rounded",!0)("outlined",!0)}}function Mo(i,t){i&1&&(a(0,"small",34),m(1,"Nombre es requerido."),o())}function Io(i,t){i&1&&(a(0,"small",34),m(1,"C\xE9dula es requerida."),o())}function Do(i,t){i&1&&(a(0,"small",34),m(1,"Precio hora es requerido."),o())}function Vo(i,t){if(i&1){let e=h();a(0,"div",26)(1,"div")(2,"label",27),m(3,"Nombre"),o(),a(4,"input",28),x("ngModelChange",function(n){d(e);let l=c();return y(l.employee.name,n)||(l.employee.name=n),u(n)}),o(),_(5,Mo,2,0,"small",29),o(),a(6,"div")(7,"label",30),m(8,"C\xE9dula"),o(),a(9,"p-inputnumber",31),x("ngModelChange",function(n){d(e);let l=c();return y(l.employee.cc,n)||(l.employee.cc=n),u(n)}),o(),_(10,Io,2,0,"small",29),o(),a(11,"div")(12,"label",32),m(13,"Precio Hora"),o(),a(14,"p-inputnumber",33),x("ngModelChange",function(n){d(e);let l=c();return y(l.employee.hourPrice,n)||(l.employee.hourPrice=n),u(n)}),o(),_(15,Do,2,0,"small",29),o()()}if(i&2){let e=c();s(4),v("ngModel",e.employee.name),s(),p("ngIf",e.submitted&&!e.employee.name),s(4),v("ngModel",e.employee.cc),s(),p("ngIf",e.submitted&&!e.employee.cc),s(4),v("ngModel",e.employee.hourPrice),p("minFractionDigits",0),s(),p("ngIf",e.submitted&&!e.employee.hourPrice)}}function Po(i,t){if(i&1){let e=h();a(0,"p-button",35),b("click",function(){d(e);let n=c();return u(n.hideDialog())}),o(),a(1,"p-button",36),b("click",function(){d(e);let n=c();return u(n.saveEmployee())}),o()}}var wt=class i{constructor(t){this.service=t}submitted=!1;employee;employeeDialog=!1;employees=P([]);cols;destroy$=new oe;employeeService=S(it);ngOnInit(){this.loadData(),this.getAllEmployees()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openNew(){this.employee={},this.submitted=!1,this.employeeDialog=!0}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}hideDialog(){this.employeeDialog=!1,this.submitted=!1}saveEmployee(){this.submitted=!0;let t=this.employees();!this.employee.name?.trim()||!this.employee.cc||!this.employee.hourPrice||this.employeeService.addEditEmployee(this.employee).subscribe({next:e=>{this.service.add({severity:"success",summary:"Successful",detail:"Empleado guardado correctamente.",life:3e3}),t.some(n=>n._id===e.data._id)?t=t.map(n=>n._id===e.data._id?e.data:n):t.push(e.data),this.employees.set([...t])},error:()=>{this.service.add({severity:"error",summary:"Error",detail:"No se pudo guardar el Empleado."})},complete:()=>{this.employeeDialog=!1,this.employee={}}})}editEmployee(t){this.employee=D({},t),this.employeeDialog=!0}loadData(){this.cols=[{field:"name",header:"Nombre"},{field:"cc",header:"C\xE9dula"},{field:"hourPrice",header:"Precio Hora"}]}getAllEmployees(){this.employeeService.getAllEmployee().pipe(re(this.destroy$)).subscribe({next:t=>{this.employees.set(t.data)},error:()=>{this.service.add({severity:"error",summary:"Error",detail:"No se pudo cargar el listado de empleados."})}})}static \u0275fac=function(e){return new(e||i)(Z(I))};static \u0275cmp=V({type:i,selectors:[["app-employee"]],features:[O([I])],decls:20,vars:17,consts:[["start",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],[1,"card"],[1,"font-semibold","text-xl","mb-4"],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Mostrando {first} hasta {last} de {totalRecords} empleados",3,"value","rows","columns","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport","rowsPerPageOptions"],["header","Detalle del Empleado",3,"visibleChange","visible","modal"],["label","Nuevo Empleado","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pSortableColumn","name",2,"min-width","16rem"],["field","name"],["pSortableColumn","cc",2,"min-width","12rem"],["field","quantity"],["pSortableColumn","hourPrice",2,"min-width","8rem"],["field","price"],[2,"min-width","12rem"],[2,"min-width","16rem"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],[1,"flex","flex-col","gap-6"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],["for","cc",1,"block","font-bold","mb-3"],["id","cc","fluid","",3,"ngModelChange","ngModel"],["for","price",1,"block","font-bold","mb-3"],["id","price","mode","currency","currency","COP","fluid","",3,"ngModelChange","ngModel","minFractionDigits"],[1,"text-red-500"],["label","Cancelar","icon","pi pi-times","text","",3,"click"],["label","Guardar","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let n=h();f(0,"p-toast"),a(1,"div",7)(2,"div",8),m(3,"Empleados"),o(),a(4,"p-toolbar",9),_(5,So,1,0,"ng-template",null,0,C),o(),a(7,"p-table",10,1),_(9,Eo,6,0,"ng-template",null,2,C)(11,wo,11,0,"ng-template",null,3,C)(13,To,10,10,"ng-template",null,4,C),o(),a(15,"p-dialog",11),x("visibleChange",function(g){return d(n),y(r.employeeDialog,g)||(r.employeeDialog=g),u(g)}),_(16,Vo,16,7,"ng-template",null,5,C)(18,Po,2,0,"ng-template",null,6,C),o()()}e&2&&(s(7),p("value",r.employees())("rows",10)("columns",r.cols)("paginator",!0)("globalFilterFields",w(13,vo))("tableStyle",w(14,yo))("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",w(15,xo)),s(8),H(w(16,Co)),v("visible",r.employeeDialog),p("modal",!0))},dependencies:[k,W,Me,F,N,Q,J,be,ge,fe,he,Y,X,ne,pe,ue,de,G,_e,ee,U,R,ie,A,ce,L,z,te],encapsulation:2})};var Be=class i{PATH_UTIL="util";PATH_SETTING="setting";apiService=S(De);constructor(){}getAllModule(){return this.apiService.get(`${this.PATH_UTIL}/module/all`)}addEditModule(t){return this.apiService.post(`${this.PATH_UTIL}/module/add-edit-module`,{_id:t._id||void 0,module:t.module})}getSettings(){return this.apiService.get(`${this.PATH_SETTING}/setting`)}updateSettings(t){return this.apiService.post(`${this.PATH_SETTING}/setting`,D({},t))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var ko=()=>["module"],No=()=>({"min-width":"75rem"}),Ho=()=>[10,20,30],Fo=()=>({width:"450px"});function Bo(i,t){if(i&1){let e=h();a(0,"p-button",12),b("onClick",function(){d(e);let n=c();return u(n.openNew())}),o()}}function Oo(i,t){if(i&1){let e=h();a(0,"div",13)(1,"h5",14),m(2,"Administrar Modulos"),o(),a(3,"p-iconfield"),f(4,"p-inputicon",15),a(5,"input",16),b("input",function(n){d(e);let l=c(),g=me(8);return u(l.onGlobalFilter(g,n))}),o()()()}}function Wo(i,t){i&1&&(a(0,"tr")(1,"th",17),m(2," M\xF3dulo "),f(3,"p-sortIcon",18),o(),f(4,"th",19),o())}function Ao(i,t){if(i&1){let e=h();a(0,"tr")(1,"td",19),m(2),o(),a(3,"td")(4,"p-button",20),b("click",function(){let n=d(e).$implicit,l=c();return u(l.editModule(n))}),o()()()}if(i&2){let e=t.$implicit;s(2),E(e.module),s(2),p("rounded",!0)("outlined",!0)}}function Lo(i,t){i&1&&(a(0,"small",25),m(1,"M\xF3dulo es requerido."),o())}function Ro(i,t){if(i&1){let e=h();a(0,"div",21)(1,"div")(2,"label",22),m(3,"M\xF3dulo"),o(),a(4,"input",23),x("ngModelChange",function(n){d(e);let l=c();return y(l.module.module,n)||(l.module.module=n),u(n)}),o(),_(5,Lo,2,0,"small",24),o()()}if(i&2){let e=c();s(4),v("ngModel",e.module.module),s(),p("ngIf",e.submitted&&!e.module.module)}}function jo(i,t){if(i&1){let e=h();a(0,"p-button",26),b("click",function(){d(e);let n=c();return u(n.hideDialog())}),o(),a(1,"p-button",27),b("click",function(){d(e);let n=c();return u(n.saveModule())}),o()}}var Tt=class i{constructor(t){this.service=t}submitted=!1;module;moduleDialog=!1;modules=P([]);cols;destroy$=new oe;settingService=S(Be);ngOnInit(){this.loadData(),this.getAllModules()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openNew(){this.module={},this.submitted=!1,this.moduleDialog=!0}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}hideDialog(){this.moduleDialog=!1,this.submitted=!1}saveModule(){this.submitted=!0;let t=this.modules();this.module.module?.trim()&&this.settingService.addEditModule(this.module).subscribe({next:e=>{this.service.add({severity:"success",summary:"Successful",detail:"M\xF3dule guardado correctamente.",life:3e3}),t.some(n=>n._id===e.data._id)?t=t.map(n=>n._id===e.data._id?e.data:n):t.push(e.data),this.modules.set([...t])},error:()=>{this.service.add({severity:"error",summary:"Error",detail:"No se pudo guardar el m\xF3dulo."})},complete:()=>{this.moduleDialog=!1,this.module={}}})}editModule(t){this.module=D({},t),this.moduleDialog=!0}loadData(){this.cols=[{field:"module",header:"M\xF3dulo"}]}getAllModules(){this.settingService.getAllModule().pipe(re(this.destroy$)).subscribe({next:t=>{this.modules.set(t.data)},error:()=>{this.service.add({severity:"error",summary:"Error",detail:"No se pudo cargar el listado de m\xF3dulos."})}})}static \u0275fac=function(e){return new(e||i)(Z(I))};static \u0275cmp=V({type:i,selectors:[["app-module"]],features:[O([I])],decls:20,vars:17,consts:[["start",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],[1,"card"],[1,"font-semibold","text-xl","mb-4"],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Mostrando {first} hasta {last} de {totalRecords} modulos",3,"value","rows","columns","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport","rowsPerPageOptions"],["header","Detalle del m\xF3dulo",3,"visibleChange","visible","modal"],["label","Nuevo M\xF3dulo","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pSortableColumn","module",2,"min-width","16rem"],["field","module"],[2,"min-width","12rem"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],[1,"flex","flex-col","gap-6"],["for","module",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","module","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],["label","Cancelar","icon","pi pi-times","text","",3,"click"],["label","Guardar","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let n=h();f(0,"p-toast"),a(1,"div",7)(2,"div",8),m(3,"M\xF3dulos"),o(),a(4,"p-toolbar",9),_(5,Bo,1,0,"ng-template",null,0,C),o(),a(7,"p-table",10,1),_(9,Oo,6,0,"ng-template",null,2,C)(11,Wo,5,0,"ng-template",null,3,C)(13,Ao,5,3,"ng-template",null,4,C),o(),a(15,"p-dialog",11),x("visibleChange",function(g){return d(n),y(r.moduleDialog,g)||(r.moduleDialog=g),u(g)}),_(16,Ro,6,2,"ng-template",null,5,C)(18,jo,2,0,"ng-template",null,6,C),o()()}e&2&&(s(7),p("value",r.modules())("rows",10)("columns",r.cols)("paginator",!0)("globalFilterFields",w(13,ko))("tableStyle",w(14,No))("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",w(15,Ho)),s(8),H(w(16,Fo)),v("visible",r.moduleDialog),p("modal",!0))},dependencies:[k,W,F,N,Q,J,be,ge,fe,he,Y,X,ne,pe,ue,de,G,ee,U,R,ie,A,ce,L,z,te],encapsulation:2})};function qo(i,t){i&1&&(a(0,"small",21),m(1,"Campo requerido"),o())}function zo(i,t){i&1&&(a(0,"small",21),m(1,"Campo requerido"),o())}function Qo(i,t){i&1&&(a(0,"small",21),m(1,"Campo requerido"),o())}function Go(i,t){i&1&&(a(0,"small",21),m(1,"Campo requerido"),o())}function Uo(i,t){i&1&&(a(0,"small",21),m(1,"Campo requerido"),o())}function $o(i,t){i&1&&(a(0,"small",21),m(1,"Campo requerido"),o())}function Ko(i,t){i&1&&(a(0,"small",21),m(1,"Campo requerido"),o())}function Zo(i,t){i&1&&(a(0,"small",21),m(1,"Campo requerido"),o())}var Mt=class i{setting={_id:"",daytimeOvertimeHour:0,regularNighttimeHour:0,nighttimeOvertimeHour:0,sundayAndHolidayHour:0,daytimeOvertimeSundayHoliday:0,nighttimeOvertimeSundayHoliday:0,nightWorkSundayHoliday:0,auxiliaryTrasport:0};submitted=!1;settingService=S(Be);messageService=S(I);ngOnInit(){this.getSettings()}saveSettings(){this.submitted=!0,!(this.setting.daytimeOvertimeHour<=0||this.setting.regularNighttimeHour<=0||this.setting.nighttimeOvertimeHour<=0||this.setting.sundayAndHolidayHour<=0||this.setting.daytimeOvertimeSundayHoliday<=0||this.setting.nighttimeOvertimeSundayHoliday<=0||this.setting.nightWorkSundayHoliday<=0)&&this.settingService.updateSettings(this.setting).subscribe({next:t=>{this.submitted=!0,this.setting=t.data,this.messageService.add({severity:"success",summary:"Success",detail:"Horas guardadas correctamente"})}})}getSettings(){this.settingService.getSettings().subscribe({next:t=>{this.setting=t.data}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-setting"]],features:[O([I])],decls:44,vars:17,consts:[[1,"flex","flex-wrap","gap-4"],[1,"flex","flex-col","flex-1","min-w-[250px]"],["for","daytimeOvertimeHour",1,"block","font-bold","mb-3"],["id","daytimeOvertimeHour","fluid","","suffix","%",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],["for","regularNighttimeHour",1,"block","font-bold","mb-3"],["id","regularNighttimeHour","fluid","","suffix","%",3,"ngModelChange","ngModel"],["for","nighttimeOvertimeHour",1,"block","font-bold","mb-3"],["id","nighttimeOvertimeHour","fluid","","suffix","%",3,"ngModelChange","ngModel"],["for","sundayAndHolidayHour",1,"block","font-bold","mb-3"],["id","sundayAndHolidayHour","fluid","","suffix","%",3,"ngModelChange","ngModel"],["for","daytimeOvertimeSundayHoliday",1,"block","font-bold","mb-3"],["id","daytimeOvertimeSundayHoliday","fluid","","suffix","%",3,"ngModelChange","ngModel"],["for","nightWorkSundayHoliday",1,"block","font-bold","mb-3"],["id","nightWorkSundayHoliday","fluid","","suffix","%",3,"ngModelChange","ngModel"],["for","nighttimeOvertimeSundayHoliday",1,"block","font-bold","mb-3"],["id","nighttimeOvertimeSundayHoliday","fluid","","suffix","%",3,"ngModelChange","ngModel"],["for","auxiliaryTrasport",1,"block","font-bold","mb-3"],["id","auxiliaryTrasport","mode","currency","currency","COP","fluid","",3,"ngModelChange","ngModel","minFractionDigits"],[1,"flex","justify-end","mt-4"],["label","Guardar","icon","pi pi-check",3,"click"],[1,"text-red-500"]],template:function(e,r){e&1&&(f(0,"p-toast"),a(1,"div",0)(2,"div",1)(3,"label",2),m(4,"Recargo Hora Extra Diurna"),o(),a(5,"p-inputnumber",3),x("ngModelChange",function(l){return y(r.setting.daytimeOvertimeHour,l)||(r.setting.daytimeOvertimeHour=l),l}),o(),_(6,qo,2,0,"small",4),o(),a(7,"div",1)(8,"label",5),m(9,"Recargo Nocturno"),o(),a(10,"p-inputnumber",6),x("ngModelChange",function(l){return y(r.setting.regularNighttimeHour,l)||(r.setting.regularNighttimeHour=l),l}),o(),_(11,zo,2,0,"small",4),o(),a(12,"div",1)(13,"label",7),m(14,"Hora Extra Nocturna"),o(),a(15,"p-inputnumber",8),x("ngModelChange",function(l){return y(r.setting.nighttimeOvertimeHour,l)||(r.setting.nighttimeOvertimeHour=l),l}),o(),_(16,Qo,2,0,"small",4),o(),a(17,"div",1)(18,"label",9),m(19,"Hora Dominicales y Festivos"),o(),a(20,"p-inputnumber",10),x("ngModelChange",function(l){return y(r.setting.sundayAndHolidayHour,l)||(r.setting.sundayAndHolidayHour=l),l}),o(),_(21,Go,2,0,"small",4),o(),a(22,"div",1)(23,"label",11),m(24,"Hora Extra Diurna Dominicales y Festivos"),o(),a(25,"p-inputnumber",12),x("ngModelChange",function(l){return y(r.setting.daytimeOvertimeSundayHoliday,l)||(r.setting.daytimeOvertimeSundayHoliday=l),l}),o(),_(26,Uo,2,0,"small",4),o(),a(27,"div",1)(28,"label",13),m(29,"Hora Nocturno Dominical o Festivo"),o(),a(30,"p-inputnumber",14),x("ngModelChange",function(l){return y(r.setting.nightWorkSundayHoliday,l)||(r.setting.nightWorkSundayHoliday=l),l}),o(),_(31,$o,2,0,"small",4),o(),a(32,"div",1)(33,"label",15),m(34,"Hora Extra Nocturna Dominicales y Festivos"),o(),a(35,"p-inputnumber",16),x("ngModelChange",function(l){return y(r.setting.nighttimeOvertimeSundayHoliday,l)||(r.setting.nighttimeOvertimeSundayHoliday=l),l}),o(),_(36,Ko,2,0,"small",4),o(),a(37,"div",1)(38,"label",17),m(39,"Auxilio Transporte"),o(),a(40,"p-inputnumber",18),x("ngModelChange",function(l){return y(r.setting.auxiliaryTrasport,l)||(r.setting.auxiliaryTrasport=l),l}),o(),_(41,Zo,2,0,"small",4),o()(),a(42,"div",19)(43,"p-button",20),b("click",function(){return r.saveSettings()}),o()()),e&2&&(s(5),v("ngModel",r.setting.daytimeOvertimeHour),s(),p("ngIf",r.submitted&&!r.setting.daytimeOvertimeHour),s(4),v("ngModel",r.setting.regularNighttimeHour),s(),p("ngIf",r.submitted&&!r.setting.regularNighttimeHour),s(4),v("ngModel",r.setting.nighttimeOvertimeHour),s(),p("ngIf",r.submitted&&!r.setting.nighttimeOvertimeHour),s(4),v("ngModel",r.setting.sundayAndHolidayHour),s(),p("ngIf",r.submitted&&!r.setting.sundayAndHolidayHour),s(4),v("ngModel",r.setting.daytimeOvertimeSundayHoliday),s(),p("ngIf",r.submitted&&!r.setting.daytimeOvertimeSundayHoliday),s(4),v("ngModel",r.setting.nightWorkSundayHoliday),s(),p("ngIf",r.submitted&&!r.setting.nightWorkSundayHoliday),s(4),v("ngModel",r.setting.nighttimeOvertimeSundayHoliday),s(),p("ngIf",r.submitted&&!r.setting.nighttimeOvertimeSundayHoliday),s(4),v("ngModel",r.setting.auxiliaryTrasport),p("minFractionDigits",0),s(),p("ngIf",r.submitted&&!r.setting.auxiliaryTrasport))},dependencies:[k,W,ne,Q,G,_e,R,A,L,F,N,z,te],encapsulation:2})};var It=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-settings"]],decls:5,vars:0,consts:[[1,"card"],[1,"font-semibold","text-2xl","mb-4"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1),m(2,"Parametrizaci\xF3n"),o(),f(3,"app-setting"),o(),f(4,"app-module"))},dependencies:[Tt,Mt],encapsulation:2})};var ve=class i{PATH="event";eventId$=P("");apiService=S(De);getAllEvents(){return this.apiService.get(`${this.PATH}/get-events`)}addEditEvents(t){return this.apiService.post(`${this.PATH}/add-edit-event`,{_id:t._id||void 0,name:t.name,description:t.description,date:t.date,owner:t.owner,phoneNumber:t.phoneNumber,time:t.time})}getEventById(t){return this.apiService.get(`${this.PATH}/event-detail/${t}`)}saveSection(t,e){return this.apiService.post(`${this.PATH}/event-detail/${t}/section`,{name:e})}saveItemSection(t,e,r){return this.apiService.post(`${this.PATH}/event-detail/${t}/section/${e}/item`,D({},r))}deleteItem(t,e,r){return this.apiService.delete(`${this.PATH}/event-detail/${t}/section/${e}/item/${r}`)}getBills(t){return this.apiService.get(`${this.PATH}/get-bills/${t}`)}addEditBill(t){return this.apiService.post(`${this.PATH}/add-edit-bill`,t)}deleteBill(t){return this.apiService.delete(`${this.PATH}/delete-bill/${t}`)}getHoursByEventId(t){return this.apiService.get(`${this.PATH}/get-hours-by-event-id/${t}`)}addNewHour(t){return this.apiService.post(`${this.PATH}/add-hour`,t)}editHour(t){return this.apiService.post(`${this.PATH}/edit-hour`,t)}getTotalsByEventId(t){return this.apiService.get(`${this.PATH}/get-totals-by-event/${t}`)}deleteHour(t){return this.apiService.delete(`${this.PATH}/delete-hour/${t}`)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=ae({token:i,factory:i.\u0275fac,providedIn:"root"})};var Jo=()=>["name","description","owner","phoneNumber"],Xo=()=>({"min-width":"75rem"}),Yo=()=>[10,20,30],er=()=>({width:"450px"});function tr(i,t){if(i&1){let e=h();a(0,"p-button",13),b("onClick",function(){d(e);let n=c();return u(n.openNew())}),o()}}function ir(i,t){if(i&1){let e=h();a(0,"div",14)(1,"h5",15),m(2,"Administrar Eventos"),o(),a(3,"p-iconfield"),f(4,"p-inputicon",16),a(5,"input",17),b("input",function(n){d(e);let l=c(),g=me(7);return u(l.onGlobalFilter(g,n))}),o()()()}}function nr(i,t){i&1&&(a(0,"tr")(1,"th",18),m(2," Nombre "),f(3,"p-sortIcon",19),o(),a(4,"th",20),m(5," Descripci\xF3n "),f(6,"p-sortIcon",21),o(),a(7,"th",22),m(8," Fecha evento "),f(9,"p-sortIcon",23),o(),a(10,"th",24),m(11," Hora "),f(12,"p-sortIcon",25),o(),a(13,"th",26),m(14," Cliente "),f(15,"p-sortIcon",27),o(),a(16,"th",28),m(17," Celular "),f(18,"p-sortIcon",29),o(),f(19,"th",30),o())}function or(i,t){if(i&1){let e=h();a(0,"tr")(1,"td",30),m(2),o(),a(3,"td",31),m(4),o(),a(5,"td",31),m(6),j(7,"date"),o(),a(8,"td",31),m(9),j(10,"date"),o(),a(11,"td",31),m(12),o(),a(13,"td",31),m(14),o(),a(15,"td")(16,"p-button",32),b("click",function(){let n=d(e).$implicit,l=c();return u(l.editEvent(n))}),o(),a(17,"p-button",33),b("click",function(){let n=d(e).$implicit,l=c();return u(l.goEventDetail(n))}),o()()()}if(i&2){let e=t.$implicit;s(2),E(e.name),s(2),E(e.description),s(2),E(Qe(7,10,e.date,"d 'de' MMMM 'de' y","es")),s(3),E(ze(10,14,e.time,"h:mm a")),s(3),E(e.owner),s(2),E(e.phoneNumber),s(2),p("rounded",!0)("outlined",!0),s(),p("rounded",!0)("outlined",!0)}}function rr(i,t){i&1&&(a(0,"small",50),m(1,"Nombre es requerido."),o())}function ar(i,t){i&1&&(a(0,"small",50),m(1,"Descripci\xF3n es requerido."),o())}function lr(i,t){i&1&&(a(0,"small",50),m(1,"Fecha del evento es requerido."),o())}function sr(i,t){if(i&1){let e=h();a(0,"i",51),b("click",function(n){let l=d(e).clickCallBack;return u(l(n))}),o()}}function mr(i,t){i&1&&(a(0,"small",50),m(1,"Hora del evento es requerido."),o())}function cr(i,t){i&1&&(a(0,"small",50),m(1,"Cliente es requerido."),o())}function pr(i,t){i&1&&(a(0,"small",50),m(1,"Celular es requerido."),o())}function dr(i,t){if(i&1){let e=h();a(0,"div",34)(1,"div")(2,"label",35),m(3,"Nombre"),o(),a(4,"input",36),x("ngModelChange",function(n){d(e);let l=c();return y(l.event.name,n)||(l.event.name=n),u(n)}),o(),_(5,rr,2,0,"small",37),o(),a(6,"div")(7,"label",38),m(8,"Descripci\xF3n"),o(),a(9,"textarea",39),x("ngModelChange",function(n){d(e);let l=c();return y(l.event.description,n)||(l.event.description=n),u(n)}),o(),_(10,ar,2,0,"small",37),o(),a(11,"div",40)(12,"div",41)(13,"label",42),m(14,"Fecha Evento"),o(),a(15,"p-datepicker",43),x("ngModelChange",function(n){d(e);let l=c();return y(l.event.date,n)||(l.event.date=n),u(n)}),o(),_(16,lr,2,0,"small",37),o(),a(17,"div",41)(18,"label",44),m(19,"Hora Evento"),o(),a(20,"p-datepicker",45),x("ngModelChange",function(n){d(e);let l=c();return y(l.event.time,n)||(l.event.time=n),u(n)}),_(21,sr,1,0,"ng-template",null,7,C),o(),_(23,mr,2,0,"small",37),o()(),a(24,"div")(25,"label",46),m(26,"Cliente"),o(),a(27,"input",47),x("ngModelChange",function(n){d(e);let l=c();return y(l.event.owner,n)||(l.event.owner=n),u(n)}),o(),_(28,cr,2,0,"small",37),o(),a(29,"div")(30,"label",48),m(31,"Celular:"),o(),a(32,"input",49),x("ngModelChange",function(n){d(e);let l=c();return y(l.event.phoneNumber,n)||(l.event.phoneNumber=n),u(n)}),o(),_(33,pr,2,0,"small",37),o()()}if(i&2){let e=c();s(4),v("ngModel",e.event.name),s(),p("ngIf",e.submitted&&!e.event.name),s(4),v("ngModel",e.event.description),s(),p("ngIf",e.submitted&&!e.event.description),s(5),v("ngModel",e.event.date),p("iconDisplay","input")("showIcon",!0),s(),p("ngIf",e.submitted&&!e.event.date),s(4),v("ngModel",e.event.time),p("iconDisplay","input")("showIcon",!0)("timeOnly",!0),s(3),p("ngIf",e.submitted&&!e.event.time),s(4),v("ngModel",e.event.owner),s(),p("ngIf",e.submitted&&!e.event.owner),s(4),v("ngModel",e.event.phoneNumber),s(),p("ngIf",e.submitted&&!e.event.phoneNumber)}}function ur(i,t){if(i&1){let e=h();a(0,"p-button",52),b("click",function(){d(e);let n=c();return u(n.hideDialog())}),o(),a(1,"p-button",53),b("click",function(){d(e);let n=c();return u(n.saveEvent())}),o()}}var Dt=class i{constructor(t){this.service=t}submitted=!1;event;eventDialog=!1;events=P([]);cols;destroy$=new oe;eventService=S(ve);router=S(ut);ngOnInit(){this.loadData(),this.getAllEvent()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openNew(){this.event={},this.submitted=!1,this.eventDialog=!0}onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}hideDialog(){this.eventDialog=!1,this.submitted=!1}saveEvent(){this.submitted=!0;let t=this.events();!this.event.name?.trim()||!this.event.description||!this.event.date||!this.event.owner||!this.event.phoneNumber||this.eventService.addEditEvents(this.event).subscribe({next:e=>{this.service.add({severity:"success",summary:"Successful",detail:"Evento guardado correctamente.",life:3e3}),t.some(n=>n._id===e.data._id)?t=t.map(n=>n._id===e.data._id?e.data:n):t.push(e.data),this.events.set([...t])},error:()=>{this.service.add({severity:"error",summary:"Error",detail:"No se pudo guardar el evento."})},complete:()=>{this.eventDialog=!1,this.event={}}})}editEvent(t){this.event=K(D({},t),{date:new Date(t.date),time:new Date(t.time)}),this.eventDialog=!0}goEventDetail(t){this.router.navigate(["/pages/event-detail",t._id])}loadData(){this.cols=[{field:"name",header:"Nombre"},{field:"description",header:"Descripci\xF3n"},{field:"date",header:"Fecha evento"},{field:"owner",header:"Cliente"},{field:"phoneNumber",header:"Movil"}]}getAllEvent(){this.eventService.getAllEvents().pipe(re(this.destroy$)).subscribe({next:t=>{this.events.set(t.data)},error:()=>{this.service.add({severity:"error",summary:"Error",detail:"No se pudo cargar las cotizaciones."})}})}static \u0275fac=function(e){return new(e||i)(Z(I))};static \u0275cmp=V({type:i,selectors:[["app-events"]],features:[O([I])],decls:19,vars:17,consts:[["start",""],["dt",""],["caption",""],["header",""],["body",""],["content",""],["footer",""],["inputicon",""],[1,"card"],[1,"font-semibold","text-2xl","mb-4"],["styleClass","mb-6"],["dataKey","id","currentPageReportTemplate","Mostrando {first} hasta {last} de {totalRecords} eventos",3,"value","rows","columns","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport","rowsPerPageOptions"],["header","Detalle del Evento",3,"visibleChange","visible","modal"],["label","Agregar Evento","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],["pSortableColumn","name",2,"min-width","16rem"],["field","name"],["pSortableColumn","description",2,"min-width","12rem"],["field","description"],["pSortableColumn","date",2,"min-width","8rem"],["field","date"],["pSortableColumn","time",2,"min-width","8rem"],["field","time"],["pSortableColumn","owner",2,"min-width","8rem"],["field","owner"],["pSortableColumn","phoneNumber",2,"min-width","8rem"],["field","phoneNumber"],[2,"min-width","12rem"],[2,"min-width","16rem"],["icon","pi pi-pencil",1,"mr-2",3,"click","rounded","outlined"],["icon","pi pi-pen-to-square",1,"mr-2",3,"click","rounded","outlined"],[1,"flex","flex-col","gap-6"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["class","text-red-500",4,"ngIf"],["for","description",1,"block","font-bold","mb-3"],["rows","4","maxlength","100","cols","30","pTextarea","",1,"w-full",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-6"],["for","date",1,"block","font-bold","mb-3"],["inputId","icondisplay","id","date",3,"ngModelChange","ngModel","iconDisplay","showIcon"],["for","time",1,"block","font-bold","mb-3"],["id","time","inputId","templatedisplay",1,"w-full",3,"ngModelChange","ngModel","iconDisplay","showIcon","timeOnly"],["for","owner",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","owner","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],["for","phoneNumber",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","phoneNumber","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],[1,"text-red-500"],[1,"pi","pi-clock",3,"click"],["label","Cancelar","icon","pi pi-times","text","",3,"click"],["label","Guardar","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let n=h();a(0,"div",8)(1,"div",9),m(2,"Eventos"),o(),a(3,"p-toolbar",10),_(4,tr,1,0,"ng-template",null,0,C),o(),a(6,"p-table",11,1),_(8,ir,6,0,"ng-template",null,2,C)(10,nr,20,0,"ng-template",null,3,C)(12,or,18,17,"ng-template",null,4,C),o(),a(14,"p-dialog",12),x("visibleChange",function(g){return d(n),y(r.eventDialog,g)||(r.eventDialog=g),u(g)}),_(15,dr,34,17,"ng-template",null,5,C)(17,ur,2,0,"ng-template",null,6,C),o()()}e&2&&(s(6),p("value",r.events())("rows",10)("columns",r.cols)("paginator",!0)("globalFilterFields",w(13,Jo))("tableStyle",w(14,Xo))("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",w(15,Yo)),s(8),H(w(16,er)),v("visible",r.eventDialog),p("modal",!0))},dependencies:[k,W,Ge,F,N,Q,J,be,ge,fe,he,Y,X,ne,pe,ue,de,G,ee,U,R,ie,A,ce,gt,L,z,Ye,Xe,Je,Ze],encapsulation:2})};var _r=(i,t)=>t.route;function gr(i,t){if(i&1&&(a(0,"p-tab",15),f(1,"i"),a(2,"span"),m(3),o()()),i&2){let e=t.$implicit;p("value",e.route)("routerLink",e.route),s(),qe(e.icon),s(2),E(e.label)}}var Vt=class i{activeRoute=S(He);eventService=S(ve);router=S(ut);totalEvent={_id:"",date:new Date,description:"",name:"",owner:"",phoneNumber:0,time:new Date,totalBillValue:0,totalCostPrice:0,totalHourCost:0,totalRentalPrice:0};tabs=[{route:"quote",label:"Cotizaci\xF3n",icon:"pi pi-calculator"},{route:"labour",label:"Registro de Horas",icon:"pi pi-calendar-clock"},{route:"bills",label:"Gastos",icon:"pi pi-receipt"}];constructor(){Ne(()=>{let t=this.eventService.eventId$();this.getEventDetail(t)})}ngOnInit(){this.router.navigate(["quote"],{relativeTo:this.activeRoute}),this.activeRoute.params.subscribe(t=>{let{id:e}=t;this.eventService.eventId$.set(e)})}goClientQuote(){}getEventDetail(t){if(t)return this.eventService.getTotalsByEventId(t).subscribe(e=>{this.totalEvent=e.data})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-event-detail"]],decls:57,vars:26,consts:[[1,"font-semibold","text-3xl","mb-4"],[1,"card","flex","justify-between"],[1,"text-2xl","font-bold"],[1,"mr-2","font-bold"],[1,"mb-4"],["label","Ver Cotizaci\xF3n","severity","contrast","raised","",3,"onClick"],[1,"grid","grid-cols-12","gap-8","mb-10"],[1,"col-span-12","lg:col-span-6","xl:col-span-3"],[1,"card","mb-0"],[1,"flex","justify-between","mb-4"],[1,"block","text-muted-color","font-medium","mb-4"],[1,"text-surface-900","dark:text-surface-0","font-medium","text-2xl"],[1,"flex","items-center","justify-center","bg-orange-100","dark:bg-orange-400/10","rounded-border",2,"width","2.5rem","height","2.5rem"],[1,"pi","pi-dollar","text-orange-500","!text-xl"],["value","quote"],[1,"flex","items-center","!gap-2","text-inherit",3,"value","routerLink"]],template:function(e,r){e&1&&(a(0,"div",0),m(1,"Detalle del Evento"),o(),a(2,"div",1)(3,"div")(4,"span",2),m(5),o(),a(6,"div")(7,"span",3),m(8),o()(),a(9,"div",4)(10,"span"),m(11),j(12,"date"),o()(),a(13,"div")(14,"span"),m(15),o()()(),a(16,"div")(17,"p-button",5),b("onClick",function(){return r.goClientQuote()}),o()()(),a(18,"div",6)(19,"div",7)(20,"div",8)(21,"div",9)(22,"div")(23,"span",10),m(24,"Total Cuenta de Cobro"),o(),a(25,"div",11),m(26),j(27,"currency"),o()(),a(28,"div",12),f(29,"i",13),o()()()(),a(30,"div",7)(31,"div",8)(32,"div",9)(33,"div")(34,"span",10),m(35,"Total Mano de Obra"),o(),a(36,"div",11),m(37),j(38,"currency"),o()(),a(39,"div",12),f(40,"i",13),o()()()(),a(41,"div",7)(42,"div",8)(43,"div",9)(44,"div")(45,"span",10),m(46,"Total Gastos "),o(),a(47,"div",11),m(48),j(49,"currency"),o()(),a(50,"div",12),f(51,"i",13),o()()()()(),a(52,"p-tabs",14)(53,"p-tablist"),Ee(54,gr,4,5,"p-tab",15,_r),o()(),f(56,"router-outlet")),e&2&&(s(5),E(r.totalEvent.name),s(3),E(r.totalEvent.owner),s(3),E(Qe(12,7,r.totalEvent.time,"d 'de' MMMM 'de' y","es")),s(4),E(r.totalEvent.description),s(11),E(ye(27,11,r.totalEvent.totalRentalPrice,"COP","symbol","1.0-0")),s(11),E(ye(38,16,r.totalEvent.totalHourCost,"COP","symbol","1.0-0")),s(11),E(ye(49,21,r.totalEvent.totalBillValue,"COP","symbol","1.0-0")),s(6),we(r.tabs))},dependencies:[Vi,Di,Mi,Ii,ui,pi,di,k,Me,Ge,F,N],encapsulation:2})};var Pt=(i,t)=>t.id,hr=()=>({"min-width":"75rem"}),br=()=>[10,20,30];function vr(i,t){if(i&1){let e=h();a(0,"div",6)(1,"h5",7),m(2),o(),a(3,"p-iconfield"),f(4,"p-inputicon",8),a(5,"input",9),b("input",function(n){d(e);let l=c(),g=me(1);return u(l.onGlobalFilter(g,n))}),o()()()}if(i&2){let e=c();s(2),E(e.title)}}function yr(i,t){if(i&1&&(a(0,"th",12),m(1),f(2,"p-sortIcon",13),o()),i&2){let e=t.$implicit;We("min-width",e.size),Bt("pSortableColumn",e.id),s(),ni(" ",e.title," "),s(),Bt("field",e.id)}}function xr(i,t){if(i&1&&(a(0,"tr"),Ee(1,yr,3,5,"th",10,Pt),f(3,"th",11),o()),i&2){let e=c();s(),we(e.tableSettings.header)}}function Cr(i,t){if(i&1&&(a(0,"td"),m(1),o()),i&2){let e=c().$implicit,r=c().$implicit;We("min-width",e.size),s(),E(r[e.id])}}function Sr(i,t){if(i&1&&(a(0,"td"),m(1),j(2,"currency"),o()),i&2){let e=c().$implicit,r=c().$implicit;We("min-width",e.size),s(),E(ye(2,3,r[e.id],"COP","symbol","1.0-0"))}}function Er(i,t){if(i&1&&(a(0,"td"),m(1),j(2,"date"),o()),i&2){let e=c().$implicit,r=c().$implicit;We("min-width",e.size),s(),E(Qe(2,3,r[e.id],"d 'de' MMMM 'de' y","es"))}}function wr(i,t){if(i&1&&(a(0,"td"),f(1,"p-checkbox",16),o()),i&2){let e=c().$implicit,r=c().$implicit;We("min-width",e.size),s(),p("ngModel",r[e.id])("binary",!0)}}function Tr(i,t){if(i&1&&(a(0,"td"),m(1),j(2,"date"),o()),i&2){let e=c().$implicit,r=c().$implicit;We("min-width",e.size),s(),E(ze(2,3,r[e.id],"h:mm a"))}}function Mr(i,t){if(i&1&&_(0,Cr,2,3,"td",15)(1,Sr,3,8,"td",15)(2,Er,3,7,"td",15)(3,wr,2,4,"td",15)(4,Tr,3,6,"td",15),i&2){let e=t.$implicit;B(!e.pipe&&!e.type?0:-1),s(),B(e.pipe==="price"&&!e.type?1:-1),s(),B(e.pipe==="date"&&!e.type?2:-1),s(),B(e.type==="boolean"?3:-1),s(),B(e.pipe==="time"&&!e.type?4:-1)}}function Ir(i,t){if(i&1){let e=h();a(0,"p-button",17),b("click",function(){let n=d(e).$implicit,l=c().$implicit,g=c();return u(n.action({sectionId:g.parentId,item:l}))}),o()}if(i&2){let e=t.$implicit;p("icon",e.icon)("rounded",!0)("outlined",!0)}}function Dr(i,t){if(i&1&&(a(0,"tr"),Ee(1,Mr,5,5,null,null,Pt),a(3,"td"),Ee(4,Ir,1,3,"p-button",14,Pt),o()()),i&2){let e=c();s(),we(e.tableSettings.header),s(3),we(e.tableSettings.actions)}}function Vr(i,t){if(i&1&&(a(0,"td",19),m(1),j(2,"currency"),o()),i&2){let e=t.$implicit;s(),E(e.id.includes("empty")?"":e.pipe==="number"?e.value:ye(2,1,e.value,"COP","symbol","1.0-0"))}}function Pr(i,t){if(i&1&&(a(0,"tr")(1,"td",18),m(2,"Total"),o(),Ee(3,Vr,3,6,"td",19,Pt),o()),i&2){let e=c(2);s(),Yt("colspan",e.footerValues.size),s(2),we(e.footerValues.values)}}function kr(i,t){i&1&&_(0,Pr,5,1,"ng-template",null,4,C)}var Oe=class i{data=[];parentId;title;tableSettings;footerValues;onGlobalFilter(t,e){t.filterGlobal(e.target.value,"contains")}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-table"]],inputs:{data:"data",parentId:"parentId",title:"title",tableSettings:"tableSettings",footerValues:"footerValues"},decls:9,vars:12,consts:[["dt",""],["caption",""],["header",""],["body",""],["footer",""],["dataKey","id","currentPageReportTemplate","Mostrando {first} hasta {last} de {totalRecords} registros",3,"value","rows","columns","paginator","globalFilterFields","tableStyle","rowHover","showCurrentPageReport","rowsPerPageOptions"],[1,"flex","items-center","justify-between"],[1,"m-0"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar...",3,"input"],[3,"pSortableColumn","minWidth"],[2,"min-width","12rem"],[3,"pSortableColumn"],[3,"field"],[1,"mr-2",3,"icon","rounded","outlined"],[3,"minWidth"],["disabled","true","variant","filled",3,"ngModel","binary"],[1,"mr-2",3,"click","icon","rounded","outlined"],[1,"text-right","font-bold","p-3","pb-0"],[1,"font-bold","p-3","pb-0"]],template:function(e,r){e&1&&(a(0,"p-table",5,0),_(2,vr,6,1,"ng-template",null,1,C)(4,xr,4,0,"ng-template",null,2,C)(6,Dr,6,0,"ng-template",null,3,C)(8,kr,2,0),o()),e&2&&(p("value",r.data)("rows",10)("columns",r.tableSettings.columns)("paginator",!0)("globalFilterFields",r.tableSettings.globalFiltes)("tableStyle",w(10,hr))("rowHover",!0)("showCurrentPageReport",!0)("rowsPerPageOptions",w(11,br)),s(8),B(r.tableSettings.includesTotal&&r.footerValues?8:-1))},dependencies:[k,Me,Ge,be,ge,fe,he,F,N,R,A,L,ne,pe,ue,de,Q,J,ht,ft],encapsulation:2})};var Wi=(i,t)=>t._id,Ai=()=>({width:"450px"});function Hr(i,t){if(i&1){let e=h();a(0,"p-button",12),b("onClick",function(){d(e);let n=c().$implicit,l=c();return u(l.openNew(n._id,null))}),o()}}function Fr(i,t){if(i&1&&(a(0,"div",7)(1,"div",9),m(2),o(),a(3,"p-toolbar",10),_(4,Hr,1,0,"ng-template",null,2,C),o(),f(6,"app-table",11),o()),i&2){let e=t.$implicit,r=c();s(2),E(e.name),s(4),p("parentId",e._id)("tableSettings",r.tableSettings)("footerValues",e.footer)("title","Administrar")("data",e.items)}}function Br(i,t){if(i&1&&(a(0,"div",7)(1,"div",9),m(2),o(),f(3,"app-table",11),o()),i&2){let e=t.$implicit,r=c();s(2),E(e.name),s(),p("parentId",e._id)("tableSettings",r.tableAdminSettings)("footerValues",e.footer)("title","Administrar")("data",e.items)}}function Or(i,t){i&1&&(a(0,"small",22),m(1,"Descripci\xF3n es requerida."),o())}function Wr(i,t){i&1&&(a(0,"small",22),m(1,"Valor Alquiler es requerido."),o())}function Ar(i,t){if(i&1){let e=h();a(0,"div",19)(1,"label",20),m(2,"Valor Costo"),o(),a(3,"p-inputnumber",21),x("ngModelChange",function(n){d(e);let l=c(2);return y(l.item.costPrice,n)||(l.item.costPrice=n),u(n)}),o()(),a(4,"label",23),m(5,"Propietario"),o(),a(6,"div",24)(7,"div",25)(8,"p-radiobutton",26),x("ngModelChange",function(n){d(e);let l=c(2);return y(l.item.owner,n)||(l.item.owner=n),u(n)}),o(),a(9,"label",27),m(10,"Propio"),o()(),a(11,"div",25)(12,"p-radiobutton",28),x("ngModelChange",function(n){d(e);let l=c(2);return y(l.item.owner,n)||(l.item.owner=n),u(n)}),o(),a(13,"label",29),m(14,"Tercero"),o()()()}if(i&2){let e=c(2);s(3),v("ngModel",e.item.costPrice),p("minFractionDigits",0),s(5),v("ngModel",e.item.owner),s(4),v("ngModel",e.item.owner)}}function Lr(i,t){if(i&1){let e=h();a(0,"div",13)(1,"div",14)(2,"label",15),m(3,"Descripci\xF3n"),o(),a(4,"div",16)(5,"p-autocomplete",17),x("ngModelChange",function(n){d(e);let l=c();return y(l.item.description,n)||(l.item.description=n),u(n)}),b("completeMethod",function(n){d(e);let l=c();return u(l.search(n))}),o()(),_(6,Or,2,0,"small",18),o(),a(7,"div",19)(8,"label",20),m(9,"Valor Alquiler"),o(),a(10,"p-inputnumber",21),x("ngModelChange",function(n){d(e);let l=c();return y(l.item.rentalPrice,n)||(l.item.rentalPrice=n),u(n)}),o(),_(11,Wr,2,0,"small",18),o(),_(12,Ar,15,4),o()}if(i&2){let e=c();s(5),v("ngModel",e.item.description),p("disabled",e.isItemDialogAdmin)("suggestions",e.inventorySearch)("dropdown",!0),s(),p("ngIf",e.submitted&&!e.item.description),s(4),v("ngModel",e.item.rentalPrice),p("minFractionDigits",0),s(),p("ngIf",e.submitted&&!e.item.rentalPrice),s(),B(e.isItemDialogAdmin?-1:12)}}function Rr(i,t){if(i&1){let e=h();a(0,"p-button",30),b("click",function(){d(e);let n=c();return u(n.hideDialog())}),o(),a(1,"p-button",31),b("click",function(){d(e);let n=c();return u(n.saveItem())}),o()}}var kt=class i{submitted=!1;sections=P([]);clientSections=Ae(()=>this.eventDetail().section.filter(t=>t.type==="client"));adminSections=Ae(()=>this.eventDetail().section.filter(t=>t.type==="admin"));inventory=P([]);inventorySearch=[];selectedSection;settingService=S(Be);eventService=S(ve);inventoryService=S(et);activeRoute=S(He);messageService=S(I);confirmationService=S(q);destroy$=new oe;eventDetail=P({_id:"",eventId:"",section:[]});eventId=P("");currentSectionId;itemDialog=!1;isItemDialogAdmin=!1;ownerList=[{key:"Propio",value:"Propio"},{key:"Tercero",value:"Tercero"}];item={_id:"",description:"",rentalPrice:0,costPrice:0,owner:"Propio"};tableSettings={includesTotal:!0,columns:[{field:"description",header:"Descripci\xF3n"},{field:"rentalPrice",header:"Valor Alquiler"},{field:"costPrice",header:"Valor Costo"},{field:"owner",header:"Propietario"}],globalFiltes:["name","description"],header:[{pipe:null,id:"description",title:"Descripci\xF3n",size:"16rem"},{pipe:"price",id:"rentalPrice",title:"Valor Alquiler",size:"10rem"},{pipe:"price",id:"costPrice",title:"Valor Costo",size:"10rem"},{pipe:null,id:"owner",title:"Propietario",size:"10rem"}],actions:[{id:"edit",icon:"pi pi-pencil",action:t=>this.openNew(t.sectionId,t.item)},{id:"delete",icon:"pi pi-trash",action:t=>this.deleteItem(t.sectionId,t.item)}]};tableAdminSettings={includesTotal:!0,columns:[{field:"description",header:"Descripci\xF3n"},{field:"rentalPrice",header:"Valor"}],globalFiltes:["name","description"],header:[{pipe:null,id:"description",title:"Descripci\xF3n",size:"16rem"},{pipe:"price",id:"rentalPrice",title:"Valor",size:"10rem"}],actions:[{id:"edit",icon:"pi pi-pencil",action:t=>this.openNew(t.sectionId,t.item,!0)}]};constructor(){Ne(()=>{let t=this.eventId();this.getEventId(t)})}ngOnInit(){this.getModules(),this.loadDetail(),this.getAllInventory()}deleteItem(t,e){this.currentSectionId=t,this.confirmationService.confirm({message:"\xBFEst\xE1 seguro de eliminar el item: "+e.description+"?",header:"Confirmar",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.eventService.deleteItem(this.eventId(),this.currentSectionId,e._id).subscribe({next:r=>{this.eventDetail.update(n=>{let l=n.section.find(g=>g._id===this.currentSectionId);if(l){let g=l.items.filter(Ve=>Ve._id!==r.data);return K(D({},n),{section:[...n.section.map(Ve=>Ve._id===this.currentSectionId?K(D({},Ve),{items:g,footer:this.getFooterValues(g)}):Ve)]})}return n})}}),this.eventService.eventId$.set(""),this.eventService.eventId$.set(this.eventId()),this.messageService.add({severity:"success",summary:"Successful",detail:"Item eliminado correctamente",life:3e3})}})}saveItem(){this.submitted=!0,!(!this.item.description||!this.item.rentalPrice||!this.item.owner)&&(this.itemDialog=!1,this.eventService.saveItemSection(this.eventId(),this.currentSectionId,this.item).subscribe({next:t=>{this.item={owner:"Propio"},this.eventDetail.update(e=>{let r=e.section.find(n=>n._id===this.currentSectionId);if(r){let n=r.items.find(l=>l._id===t.data._id);if(n){let l=r.items.map(g=>g._id===n._id?t.data:g);r=K(D({},r),{items:l,footer:this.getFooterValues(l)})}else r=K(D({},r),{footer:this.getFooterValues([...r.items,t.data]),items:[...r.items,t.data]})}return K(D({},e),{section:[...e.section.map(n=>n._id!==this.currentSectionId?n:r)]})}),this.eventService.eventId$.set(""),this.eventService.eventId$.set(this.eventId()),this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Se ha guardado el item correctamente.",life:3e3})}}))}saveSection(){this.eventService.saveSection(this.eventId(),this.selectedSection.module).subscribe({next:t=>{this.eventDetail.update(e=>{let r={_id:t.data._id,name:t.data.name,type:t.data.type,items:[]};return K(D({},e),{section:[...e.section,r]})}),this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Se ha guardado la secci\xF3n correctamente.",life:3e3})}})}openNew(t,e,r=!1){this.currentSectionId=t,this.isItemDialogAdmin=r,this.itemDialog=!0,e&&(this.item=e)}hideDialog(){this.itemDialog=!1,this.item={}}search(t){this.inventorySearch=this.inventory().filter(e=>e.name?.includes(t.query))}getEventId(t){this.eventService.getEventById(t).pipe(zt(e=>{let r=e.data;return r.section=r.section.map(n=>K(D({},n),{footer:this.getFooterValues(n.items)})),r})).subscribe({next:e=>{this.eventDetail.set(e)}})}getModules(){this.settingService.getAllModule().pipe(re(this.destroy$)).subscribe({next:t=>{this.sections.set(t.data)}})}loadDetail(){this.activeRoute.parent?.params.subscribe(t=>{this.eventId.set(t.id||"")})}getAllInventory(){this.inventoryService.getAllInventory().subscribe({next:t=>{this.inventory.set(t.data)}})}getFooterValues(t){let e={},r=t.reduce((l,g)=>l+g.rentalPrice,0),n=t.reduce((l,g)=>l+g.costPrice,0);return e.size="1",e.values=[{id:"rentalPrice",value:r,pipe:"price"},{id:"costPrice",value:n,pipe:"price"},{id:"empty1",value:0,pipe:"number"},{id:"empty2",value:0,pipe:"number"}],e}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-quote"]],features:[O([I,q])],decls:16,vars:13,consts:[["content",""],["footer",""],["start",""],[1,"font-semibold","text-xl","mb-4","mt-5"],[1,"mt-2","flex","flex-row","gap-4"],["optionLabel","module","placeholder","Seleccionar secci\xF3n",1,"w-full","md:w-56",3,"ngModelChange","options","ngModel","checkmark","showClear"],["label","Agregar","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick","disabled"],[1,"mt-5","card"],["header","Detalle del Item",3,"visibleChange","visible","modal"],[1,"font-semibold","text-xl","mb-4"],["styleClass","mb-6"],[3,"parentId","tableSettings","footerValues","title","data"],["label","Nuevo Item","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],[1,"flex","flex-col","gap-6"],[1,"w-full"],["for","name",1,"block","font-bold","mb-3"],[1,"flex","flex-col","w-full"],["optionValue","name","optionLabel","name",3,"ngModelChange","completeMethod","ngModel","disabled","suggestions","dropdown"],["class","text-red-500",4,"ngIf"],[1,"col-span-6"],["for","price",1,"block","font-bold","mb-3"],["id","price","mode","currency","currency","COP","fluid","",3,"ngModelChange","ngModel","minFractionDigits"],[1,"text-red-500"],["for","price",1,"block","font-bold"],[1,"flex","flex-wrap","gap-4"],[1,"flex","items-center"],["name","propio","value","Propio","inputId","propio",3,"ngModelChange","ngModel"],["for","propio",1,"ml-2"],["name","Tercero","value","Tercero","inputId","Tercero",3,"ngModelChange","ngModel"],["for","Tercero",1,"ml-2"],["label","Cancelar","icon","pi pi-times","text","",3,"click"],["label","Guardar","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let n=h();a(0,"div",3),m(1,"Agregar Seccion"),o(),f(2,"p-toast"),a(3,"div",4)(4,"p-select",5),x("ngModelChange",function(g){return d(n),y(r.selectedSection,g)||(r.selectedSection=g),u(g)}),o(),a(5,"p-button",6),b("onClick",function(){return d(n),u(r.saveSection())}),o()(),Ee(6,Fr,7,6,"div",7,Wi),Ee(8,Br,4,6,"div",7,Wi),a(10,"p-dialog",8),x("visibleChange",function(g){return d(n),y(r.itemDialog,g)||(r.itemDialog=g),u(g)}),_(11,Lr,13,9,"ng-template",null,0,C)(13,Rr,2,0,"ng-template",null,1,C),o(),f(15,"p-confirmdialog")}e&2&&(s(4),p("options",r.sections()),v("ngModel",r.selectedSection),p("checkmark",!0)("showClear",!0),s(),p("disabled",!r.selectedSection),s(),we(r.clientSections()),s(2),we(r.adminSections()),s(2),H(w(11,Ai)),v("visible",r.itemDialog),p("modal",!0),s(5),H(w(12,Ai)))},dependencies:[k,W,Oe,R,A,L,F,N,Fe,Pe,bt,xi,Y,X,ee,U,Ke,$e,Ci,z,te,yt,vt,G,_e],encapsulation:2})};var Li=()=>({width:"450px"});function jr(i,t){if(i&1){let e=h();a(0,"p-button",8),b("onClick",function(){d(e);let n=c();return u(n.openNew(null))}),o()}}function qr(i,t){i&1&&(a(0,"small",31),m(1,"Fecha del Gasto es requerido."),o())}function zr(i,t){i&1&&(a(0,"small",31),m(1,"Valor del gasto es requerido."),o())}function Qr(i,t){i&1&&(a(0,"small",31),m(1,"Concepto es requerido."),o())}function Gr(i,t){i&1&&(a(0,"small",31),m(1,"Tipo de pago es requerido."),o())}function Ur(i,t){i&1&&(a(0,"small",31),m(1,"Medio de pago es requerido."),o())}function $r(i,t){if(i&1){let e=h();a(0,"div")(1,"label",32),m(2,"Medio de Pago"),o(),a(3,"p-select",33),x("ngModelChange",function(n){d(e);let l=c(2);return y(l.bill.paymentCompany,n)||(l.bill.paymentCompany=n),u(n)}),o(),_(4,Ur,2,0,"small",15),o()}if(i&2){let e=c(2);s(3),p("options",e.paymentCompany),v("ngModel",e.bill.paymentCompany),p("checkmark",!0)("showClear",!0),s(),p("ngIf",e.submitted&&!e.bill.paymentCompany)}}function Kr(i,t){if(i&1){let e=h();a(0,"div",9),f(1,"div",10),a(2,"div",11)(3,"div",12)(4,"label",13),m(5,"Fecha del Gasto"),o(),a(6,"p-datepicker",14),x("ngModelChange",function(n){d(e);let l=c();return y(l.bill.date,n)||(l.bill.date=n),u(n)}),o(),_(7,qr,2,0,"small",15),o(),a(8,"div",12)(9,"label",16),m(10,"Valor"),o(),a(11,"p-inputnumber",17),x("ngModelChange",function(n){d(e);let l=c();return y(l.bill.value,n)||(l.bill.value=n),u(n)}),o(),_(12,zr,2,0,"small",15),o()(),a(13,"div",11)(14,"div",18)(15,"label",19),m(16,"Concepto"),o(),a(17,"input",20),x("ngModelChange",function(n){d(e);let l=c();return y(l.bill.name,n)||(l.bill.name=n),u(n)}),o(),_(18,Qr,2,0,"small",15),o(),a(19,"div",21)(20,"div",22)(21,"label",23),m(22," Conciliaci\xF3n "),o(),a(23,"p-checkbox",24),x("ngModelChange",function(n){d(e);let l=c();return y(l.bill.conciliation,n)||(l.bill.conciliation=n),u(n)}),o()()()(),a(24,"div")(25,"label",25),m(26,"Tipo de Pago"),o(),a(27,"p-select",26),x("ngModelChange",function(n){d(e);let l=c();return y(l.bill.paymentType,n)||(l.bill.paymentType=n),u(n)}),o(),_(28,Gr,2,0,"small",15),o(),_(29,$r,5,5,"div"),a(30,"div")(31,"label",27),m(32,"Tipo de Gasto"),o(),a(33,"p-select",28),x("ngModelChange",function(n){d(e);let l=c();return y(l.bill.billType,n)||(l.bill.billType=n),u(n)}),o()(),a(34,"div")(35,"label",29),m(36,"Observaciones"),o(),a(37,"textarea",30),x("ngModelChange",function(n){d(e);let l=c();return y(l.bill.observations,n)||(l.bill.observations=n),u(n)}),o()()()}if(i&2){let e=c();s(6),v("ngModel",e.bill.date),p("iconDisplay","input")("showIcon",!0),s(),p("ngIf",e.submitted&&!e.bill.date),s(4),v("ngModel",e.bill.value),p("minFractionDigits",0),s(),p("ngIf",e.submitted&&!e.bill.value),s(5),v("ngModel",e.bill.name),s(),p("ngIf",e.submitted&&!e.bill.name),s(5),p("binary",!0),v("ngModel",e.bill.conciliation),s(4),p("options",e.paymentTypes),v("ngModel",e.bill.paymentType),p("checkmark",!0)("showClear",!0),s(),p("ngIf",e.submitted&&!e.bill.paymentType),s(),B(e.bill.paymentType==="Transferencia"?29:-1),s(4),p("options",e.billType),v("ngModel",e.bill.billType),p("checkmark",!0)("showClear",!0),s(4),v("ngModel",e.bill.observations)}}function Zr(i,t){if(i&1){let e=h();a(0,"p-button",34),b("click",function(){d(e);let n=c();return u(n.hideDialog())}),o(),a(1,"p-button",35),b("click",function(){d(e);let n=c();return u(n.saveItem())}),o()}}var Nt=class i{submitted=!1;eventId=P("");billDialog=!1;bills=P([]);bill={date:new Date,value:0,conciliation:!0};footerValues=Ae(()=>{let t={},e=this.bills().reduce((r,n)=>r+(n.value||0),0);return t.size="2",t.values=[{id:"total",value:e,pipe:"price"},{id:"empty1",value:0,pipe:"number"},{id:"empty2",value:0,pipe:"number"},{id:"empty3",value:0,pipe:"number"},{id:"empty4",value:0,pipe:"number"},{id:"empty5",value:0,pipe:"number"},{id:"empty6",value:0,pipe:"number"}],t});paymentTypes=[{key:"Efectivo",value:"Efectivo"},{key:"Transferencia",value:"Transferencia"}];billType=[{key:"Administraci\xF3n",value:"Administraci\xF3n"},{key:"Transporte",value:"Transporte"},{key:"Alimentaci\xF3n",value:"Alimentaci\xF3n"},{key:"Imprevistos",value:"Imprevistos"}];paymentCompany=[{key:"Bancolombia",value:"Bancolombia"},{key:"Nequi",value:"Nequi"}];tableSettings={includesTotal:!0,columns:[{field:"date",header:"Fecha"},{field:"name",header:"Concepto"},{field:"value",header:"Valor"},{field:"paymentType",header:"Tipo de Pago"},{field:"paymentCompany",header:"Medio de Pago"},{field:"observations",header:"Observaciones"},{field:"conciliation",header:"Conciliaci\xF3n"},{field:"billType",header:"Tipo de Gasto"}],globalFiltes:["name","observations","paymentType","paymentCompany"],header:[{pipe:"date",id:"date",title:"Fecha",size:"16rem"},{pipe:null,id:"name",title:"Concepto",size:"16rem"},{pipe:"price",id:"value",title:"Valor",size:"10rem"},{pipe:null,id:"paymentType",title:"Tipo de Pago",size:"12rem"},{pipe:null,id:"paymentCompany",title:"Medio de Pago",size:"12rem"},{pipe:null,id:"observations",title:"Observaciones",size:"20rem"},{pipe:null,id:"conciliation",title:"Conciliaci\xF3n",size:"10rem",type:"boolean"},{pipe:null,id:"billType",title:"Tipo de Gasto",size:"10rem"}],actions:[{id:"edit",icon:"pi pi-pencil",action:t=>this.openNew(t.item)},{id:"delete",icon:"pi pi-trash",action:t=>this.deleteItem(t.item)}]};activeRoute=S(He);eventService=S(ve);messageService=S(I);confirmationService=S(q);constructor(){Ne(()=>{this.getBills()})}ngOnInit(){this.loadDetail()}openNew(t){this.billDialog=!0,t&&(this.bill=K(D({},t),{date:new Date(t.date)}))}deleteItem(t){this.confirmationService.confirm({message:"\xBFEst\xE1 seguro de eliminar el gasto: "+t.name+"?",header:"Confirmar",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.eventService.deleteBill(t._id).subscribe({next:e=>{let r=e.data;this.bills.update(n=>n.filter(l=>l._id!==r._id)),this.messageService.add({severity:"success",summary:"Successful",detail:"Item eliminado correctamente",life:3e3}),this.eventService.eventId$.set(""),this.eventService.eventId$.set(this.eventId())}})}})}hideDialog(){this.billDialog=!1}saveItem(){this.submitted=!0,!(!this.bill.date||!this.bill.value||!this.bill.name||!this.bill.paymentType||this.bill.paymentType==="Transferencia"&&!this.bill.paymentCompany||this.bill.value===0)&&(this.bill=K(D({},this.bill),{eventId:this.eventId()}),this.eventService.addEditBill(this.bill).subscribe({next:t=>{let e=t.data;this.bills.update(r=>r.find(l=>l._id===e._id)?r.map(l=>l._id===e._id?e:l):(r=[...r,e],r)),this.billDialog=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Gasto guardado correctamente.",life:3e3}),this.eventService.eventId$.set(""),this.eventService.eventId$.set(this.eventId())}}))}loadDetail(){this.activeRoute.parent?.params.subscribe(t=>{this.eventId.set(t.id||"")})}getBills(){this.eventService.getBills(this.eventId()).subscribe({next:t=>{this.bills.set(t.data||[])}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-bills"]],features:[O([I,q])],decls:14,vars:13,consts:[["start",""],["content",""],["footer",""],[1,"mt-5","card"],[1,"font-semibold","text-xl","mb-4"],["styleClass","mb-6"],[3,"parentId","tableSettings","footerValues","title","data"],["header","Detalle del Gasto",3,"visibleChange","visible","modal"],["label","Nuevo Gasto","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],[1,"flex","flex-col","gap-6"],[1,"w-full"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-6"],["for","date",1,"block","font-bold","mb-3"],["inputId","icondisplay","id","date",1,"w-[500px]",3,"ngModelChange","ngModel","iconDisplay","showIcon"],["class","text-red-500",4,"ngIf"],["for","value",1,"block","font-bold","mb-3"],["id","value","mode","currency","currency","COP","fluid","",3,"ngModelChange","ngModel","minFractionDigits"],[1,"col-span-9"],["for","name",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","name","required","","autofocus","","fluid","",3,"ngModelChange","ngModel"],[1,"col-span-3","flex","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center"],["for","conciliation",1,"font-bold"],["inputId","conciliation","name","conciliation",3,"ngModelChange","binary","ngModel"],["for","paymentType",1,"block","font-bold","mb-3"],["name","paymentType","optionLabel","value","optionValue","value","placeholder","Seleccionar tipo de pago",1,"w-full",3,"ngModelChange","options","ngModel","checkmark","showClear"],["for","billType",1,"block","font-bold","mb-3"],["name","billType","optionLabel","value","optionValue","value","placeholder","Seleccionar tipo de gasto",1,"w-full",3,"ngModelChange","options","ngModel","checkmark","showClear"],["for","observations",1,"block","font-bold","mb-3"],["rows","4","maxlength","100","cols","30","pTextarea","",1,"w-full",3,"ngModelChange","ngModel"],[1,"text-red-500"],["for","paymentCompany",1,"block","font-bold","mb-3"],["name","paymentCompany","optionLabel","value","optionValue","value","placeholder","Seleccionar medio de pago",1,"w-full",3,"ngModelChange","options","ngModel","checkmark","showClear"],["label","Cancelar","icon","pi pi-times","text","",3,"click"],["label","Guardar","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let n=h();a(0,"div",3)(1,"div",4),m(2,"Gastos"),o(),a(3,"p-toolbar",5),_(4,jr,1,0,"ng-template",null,0,C),o(),f(6,"app-table",6),o(),a(7,"p-dialog",7),x("visibleChange",function(g){return d(n),y(r.billDialog,g)||(r.billDialog=g),u(g)}),_(8,Kr,38,22,"ng-template",null,1,C)(10,Zr,2,0,"ng-template",null,2,C),o(),f(12,"p-toast")(13,"p-confirmdialog")}e&2&&(s(6),p("parentId","")("tableSettings",r.tableSettings)("footerValues",r.footerValues())("title","Administrar Gastos")("data",r.bills()),s(),H(w(11,Li)),v("visible",r.billDialog),p("modal",!0),s(6),H(w(12,Li)))},dependencies:[F,N,R,ie,A,ce,gt,L,Oe,ht,ft,k,W,Q,J,Je,Ze,Ke,$e,Ye,Xe,ee,U,z,te,G,_e,Fe,Pe,Y,X],encapsulation:2})};var Jr=()=>({width:"450px",height:"500px"}),Xr=()=>({width:"450px"});function Yr(i,t){if(i&1){let e=h();a(0,"p-button",9),b("onClick",function(){d(e);let n=c();return u(n.openNew(null))}),o()}}function ea(i,t){i&1&&(a(0,"small",28),m(1,"Empleado es requerido."),o())}function ta(i,t){if(i&1){let e=h();a(0,"i",29),b("click",function(n){let l=d(e).clickCallBack;return u(l(n))}),o()}}function ia(i,t){i&1&&(a(0,"small",28),m(1,"Hora de Inicio requerida."),o())}function na(i,t){if(i&1){let e=h();a(0,"i",29),b("click",function(n){let l=d(e).clickCallBack;return u(l(n))}),o()}}function oa(i,t){i&1&&(a(0,"small",28),m(1,"Hora Fin debe ser mayor a la hora de inicio."),o())}function ra(i,t){if(i&1){let e=h();a(0,"div",10)(1,"div",11)(2,"label",12),m(3,"Empleado"),o(),a(4,"div",13)(5,"p-autocomplete",14),x("ngModelChange",function(n){d(e);let l=c();return y(l.item.employee,n)||(l.item.employee=n),u(n)}),b("onSelect",function(n){d(e);let l=c();return u(l.onSelectEmployee(n))})("completeMethod",function(n){d(e);let l=c();return u(l.search(n))}),o()(),_(6,ea,2,0,"small",15),o(),a(7,"div")(8,"label",16),m(9,"C\xE9dula"),o(),a(10,"input",17),x("ngModelChange",function(n){d(e);let l=c();return y(l.item.cc,n)||(l.item.cc=n),u(n)}),o()(),a(11,"div")(12,"label",18),m(13,"Precio Hora"),o(),a(14,"p-inputnumber",19),x("ngModelChange",function(n){d(e);let l=c();return y(l.item.hourPrice,n)||(l.item.hourPrice=n),u(n)}),o()(),a(15,"div")(16,"label",20),m(17,"Fecha"),o(),a(18,"p-datepicker",21),x("ngModelChange",function(n){d(e);let l=c();return y(l.item.date,n)||(l.item.date=n),u(n)}),o()(),a(19,"div",22)(20,"div",23)(21,"label",24),m(22,"Hora Inicio"),o(),a(23,"p-datepicker",25),x("ngModelChange",function(n){d(e);let l=c();return y(l.item.startTime,n)||(l.item.startTime=n),u(n)}),_(24,ta,1,0,"ng-template",null,3,C),o(),_(26,ia,2,0,"small",15),o(),a(27,"div",23)(28,"label",26),m(29,"Hora Fin"),o(),a(30,"p-datepicker",27),x("ngModelChange",function(n){d(e);let l=c();return y(l.item.endTime,n)||(l.item.endTime=n),u(n)}),_(31,na,1,0,"ng-template",null,3,C),o(),_(33,oa,2,0,"small",15),o()()()}if(i&2){let e=c();s(5),v("ngModel",e.item.employee),p("suggestions",e.employeeSearch)("dropdown",!0),s(),p("ngIf",e.submitted&&!e.item.employee),s(4),p("disabled",!0),v("ngModel",e.item.cc),s(4),p("disabled",!0),v("ngModel",e.item.hourPrice),p("minFractionDigits",0),s(4),v("ngModel",e.item.date),p("showIcon",!0)("appendTo","body")("showOnFocus",!1),s(5),v("ngModel",e.item.startTime),p("appendTo","body")("stepMinute",15)("iconDisplay","input")("showIcon",!0)("timeOnly",!0)("baseZIndex",1e3),s(3),p("ngIf",e.submitted&&!e.item.startTime),s(4),v("ngModel",e.item.endTime),p("appendTo","body")("stepMinute",15)("iconDisplay","input")("showIcon",!0)("timeOnly",!0),s(3),p("ngIf",e.submitted&&e.hasErrorTime)}}function aa(i,t){if(i&1){let e=h();a(0,"p-button",30),b("click",function(){d(e);let n=c();return u(n.hideDialog())}),o(),a(1,"p-button",31),b("click",function(){d(e);let n=c();return u(n.saveItem())}),o()}}var Ht=class i{currentDate=new Date;submitted=!1;eventId=P("");timeDialog=!1;hours=P([]);employeeSearch=[];employees=P([]);destroy$=new oe;hasErrorTime=!1;item={_id:"",eventId:this.eventId(),employee:"",cc:"",hourPrice:0,date:new Date,startTime:new Date(this.currentDate.setHours(6,0,0,0)),hrsOrd:0,valHrsOrd:0,hrsExtDia:0,valExtDia:0,hrsNoc:0,valHrsNoc:0,hrsExtNoc:0,valExtNoc:0,hrsDomDia:0,valDomDia:0,hrsExtDomDia:0,valExtDomDia:0,hrsDomNoc:0,valDomNoc:0,hrsExtDomNoc:0,valExtDomNoc:0,auxiliaryTrasport:0,total:0};footerValues=Ae(()=>{let t={},e=this.hours().reduce((T,M)=>T+(M.hrsOrd||0),0),r=this.hours().reduce((T,M)=>T+(M.valHrsOrd||0),0),n=this.hours().reduce((T,M)=>T+(M.hrsExtDia||0),0),l=this.hours().reduce((T,M)=>T+(M.valExtDia||0),0),g=this.hours().reduce((T,M)=>T+(M.hrsNoc||0),0),Ve=this.hours().reduce((T,M)=>T+(M.valHrsNoc||0),0),Ri=this.hours().reduce((T,M)=>T+(M.hrsExtNoc||0),0),ji=this.hours().reduce((T,M)=>T+(M.valExtNoc||0),0),qi=this.hours().reduce((T,M)=>T+(M.hrsDomDia||0),0),zi=this.hours().reduce((T,M)=>T+(M.valDomDia||0),0),Qi=this.hours().reduce((T,M)=>T+(M.hrsExtDomDia||0),0),Gi=this.hours().reduce((T,M)=>T+(M.valExtDomDia||0),0),Ui=this.hours().reduce((T,M)=>T+(M.hrsDomNoc||0),0),$i=this.hours().reduce((T,M)=>T+(M.valDomNoc||0),0),Ki=this.hours().reduce((T,M)=>T+(M.hrsExtDomNoc||0),0),Zi=this.hours().reduce((T,M)=>T+(M.valExtDomNoc||0),0),Ji=this.hours().reduce((T,M)=>T+(M.total||0),0),Xi=this.hours().reduce((T,M)=>T+(M.auxiliaryTrasport||0),0);return t.size="6",t.values=[{id:"totaHrsOrd",value:e,pipe:"number"},{id:"valTotaHrsOrd",value:r,pipe:"price"},{id:"hrsExtDia",value:n,pipe:"number"},{id:"valExtDia",value:l,pipe:"price"},{id:"hrsNoc",value:g,pipe:"number"},{id:"valHrsNoc",value:Ve,pipe:"price"},{id:"hrsExtNoc",value:Ri,pipe:"number"},{id:"valExtNoc",value:ji,pipe:"price"},{id:"hrsDomDia",value:qi,pipe:"number"},{id:"valDomDia",value:zi,pipe:"price"},{id:"hrsExtDomDia",value:Qi,pipe:"number"},{id:"valExtDomDia",value:Gi,pipe:"price"},{id:"hrsDomNoc",value:Ui,pipe:"number"},{id:"valDomNoc",value:$i,pipe:"price"},{id:"hrsExtDomNoc",value:Ki,pipe:"number"},{id:"valExtDomNoc",value:Zi,pipe:"price"},{id:"auxTotal",value:Xi,pipe:"price"},{id:"total",value:Ji,pipe:"price"},{id:"empty1",value:0,pipe:"number"}],t});tableSettings={includesTotal:!0,columns:[{field:"employee",header:"Empleado"},{field:"cc",header:"C\xE9dula"},{field:"date",header:"Fecha"},{field:"startTime",header:"Hora Inicio"},{field:"endTime",header:"Hora Fin"},{field:"hourPrice",header:"Precio Hora"},{field:"hrsOrd",header:"Horas Ordinarias"},{field:"valHrsOrd",header:"Valor Horas Ordinarias"},{field:"hrsExtDia",header:"Horas Extras Diurnas"},{field:"valExtDia",header:"Valor Horas Extras Diurnas"},{field:"hrsNoc",header:"Horas Nocturnas Ordinarias"},{field:"valHrsNoc",header:"Valor Hora Nocturna Ordinaria"},{field:"hrsExtNoc",header:"Horas Extras Nocturnas Ordinarias"},{field:"valExtNoc",header:"Valor Horas Extras Nocturnas Ordinarias"},{field:"hrsDomDia",header:"Horas Diurnas Dominicales"},{field:"valDomDia",header:"Valor Horas Diurnas Dominicales"},{field:"hrsExtDomDia",header:"Horas Extra Diurnas Dominicales"},{field:"valExtDomDia",header:"Valor Horas Extra Diurnas Dominicales"},{field:"hrsDomNoc",header:"Horas Nocturnas Dominicales"},{field:"valDomNoc",header:"Valor Horas Nocturnas Dominicales"},{field:"hrsExtDomNoc",header:"Horas Extras Nocturnas Dominicales"},{field:"valExtDomNoc",header:"Valor Horas Extras Nocturnas Dominicales"},{field:"auxiliaryTrasport",header:"Auxilio Transporte"},{field:"total",header:"Total a Pagar"}],globalFiltes:["employee","cc"],header:[{pipe:null,id:"employee",title:"Empleado",size:"16rem"},{pipe:null,id:"cc",title:"C\xE9dula",size:"12rem"},{pipe:"date",id:"date",title:"Fecha",size:"14rem"},{pipe:"time",id:"startTime",title:"Hora Inicio",size:"10rem"},{pipe:"time",id:"endTime",title:"Hora Fin",size:"10rem"},{pipe:"price",id:"hourPrice",title:"Precio Hora",size:"10rem"},{pipe:null,id:"hrsOrd",title:"Horas Ordinarias",size:"10rem"},{pipe:"price",id:"valHrsOrd",title:"Valor Horas Ordinarias",size:"12rem"},{pipe:null,id:"hrsExtDia",title:"Horas Extras Diurnas",size:"10rem"},{pipe:"price",id:"valExtDia",title:"Valor Horas Extras Diurnas",size:"12rem"},{pipe:null,id:"hrsNoc",title:"Horas Nocturnas Ordinarias",size:"10rem"},{pipe:"price",id:"valHrsNoc",title:"Valor Hora Nocturna Ordinaria",size:"12rem"},{pipe:null,id:"hrsExtNoc",title:"Horas Extras Nocturnas Ordinarias",size:"10rem"},{pipe:"price",id:"valExtNoc",title:"Valor Horas Extras Nocturnas Ordinarias",size:"12rem"},{pipe:null,id:"hrsDomDia",title:"Horas Diurnas Dominicales",size:"10rem"},{pipe:"price",id:"valDomDia",title:"Valor Horas Diurnas Dominicales",size:"12rem"},{pipe:null,id:"hrsExtDomDia",title:"Horas Extra Diurnas Dominicales",size:"10rem"},{pipe:"price",id:"valExtDomDia",title:"Valor Horas Extra Diurnas Dominicales",size:"12rem"},{pipe:null,id:"hrsDomNoc",title:"Horas Nocturnas Dominicales",size:"10rem"},{pipe:"price",id:"valDomNoc",title:"Valor Horas Nocturnas Dominicales",size:"12rem"},{pipe:null,id:"hrsExtDomNoc",title:"Horas Extras Nocturnas Dominicales",size:"10rem"},{pipe:"price",id:"valExtDomNoc",title:"Valor Horas Extras Nocturnas Dominicales",size:"12rem"},{pipe:"price",id:"auxiliaryTrasport",title:"Auxilio Transporte",size:"12rem"},{pipe:"price",id:"total",title:"Total a Pagar",size:"12rem"}],actions:[{id:"edit",icon:"pi pi-pencil",action:t=>this.openNew(t.item)},{id:"delete",icon:"pi pi-trash",action:t=>this.deleteItem(t.item)}]};activeRoute=S(He);eventService=S(ve);messageService=S(I);employeeService=S(it);confirmationService=S(q);constructor(){Ne(()=>{this.getHours()})}ngOnInit(){this.loadDetail(),this.getAllEmployees()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}openNew(t){this.timeDialog=!0,t&&(this.item=K(D({},t),{date:new Date(t.date),startTime:new Date(t.startTime),endTime:t.endTime?new Date(t.endTime):null}))}onSelectEmployee(t){let{value:e}=t;this.item.employee=e.name||"",this.item.cc=e.cc||"",this.item.hourPrice=e.hourPrice||0}deleteItem(t){this.confirmationService.confirm({message:"\xBFEst\xE1 seguro de eliminar el registro de hora "+t.employee+"?",header:"Confirmar",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xED",rejectLabel:"No",accept:()=>{this.eventService.deleteHour(t._id).subscribe({next:e=>{let r=e.data;this.hours.update(n=>n.filter(l=>l._id!==r._id)),this.messageService.add({severity:"success",summary:"Successful",detail:"Hora eliminada correctamente",life:3e3}),this.eventService.eventId$.set(""),this.eventService.eventId$.set(this.eventId())}})}})}hideDialog(){this.timeDialog=!1}saveItem(){if(this.submitted=!0,this.hasErrorTime=this.item&&this.item.endTime&&this.item.endTime?this.item.endTime<this.item.startTime:!1,!this.item.employee||!this.item.cc||!this.item.date||!this.item.startTime||this.hasErrorTime){this.submitted=!1;return}if(this.hasErrorTime=!1,this.item=K(D({},this.item),{eventId:this.eventId()}),!this.item._id){this.eventService.addNewHour(this.item).subscribe({next:t=>{this.hours.update(e=>{let r=D({},t.data);return[...e,r]}),this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Hora guardada correctamente",life:3e3}),this.timeDialog=!1,this.eventService.eventId$.set(""),this.eventService.eventId$.set(this.eventId())}});return}this.eventService.editHour(this.item).subscribe({next:t=>{this.hours.update(e=>{let r=e.findIndex(n=>n._id===t.data._id);return r!==-1&&(e[r]=D({},t.data)),this.timeDialog=!1,[...e]}),this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Hora actualizada correctamente",life:3e3}),this.eventService.eventId$.set(""),this.eventService.eventId$.set(this.eventId())}})}search(t){this.employeeSearch=this.employees().filter(e=>e.name?.includes(t.query))}loadDetail(){this.activeRoute.parent?.params.subscribe(t=>{this.eventId.set(t.id||"")})}getHours(){this.eventService.getHoursByEventId(this.eventId()).subscribe({next:t=>{this.hours.set(t.data||[])}})}getAllEmployees(){this.employeeService.getAllEmployee().pipe(re(this.destroy$)).subscribe({next:t=>{this.employees.set(t.data)}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=V({type:i,selectors:[["app-labour"]],features:[O([I,q])],decls:14,vars:13,consts:[["start",""],["content",""],["footer",""],["inputicon",""],[1,"mt-5","card"],[1,"font-semibold","text-xl","mb-4"],["styleClass","mb-6"],[3,"parentId","tableSettings","footerValues","title","data"],["header","Detalle del Gasto",3,"visibleChange","visible","modal"],["label","Nuevo Registro","icon","pi pi-plus","severity","secondary",1,"mr-2",3,"onClick"],[1,"flex","flex-col","gap-6"],[1,"w-full"],["for","name",1,"block","font-bold","mb-3"],[1,"flex","flex-col","w-full"],["optionLabel","name",3,"ngModelChange","onSelect","completeMethod","ngModel","suggestions","dropdown"],["class","text-red-500",4,"ngIf"],["for","cc",1,"block","font-bold","mb-3"],["type","text","pInputText","","id","cc","autofocus","","fluid","",3,"ngModelChange","disabled","ngModel"],["for","price",1,"block","font-bold","mb-3"],["id","price","mode","currency","currency","COP","fluid","",3,"ngModelChange","disabled","ngModel","minFractionDigits"],["for","date",1,"block","font-bold","mb-3"],["inputId","buttondisplay",3,"ngModelChange","ngModel","showIcon","appendTo","showOnFocus"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-6"],["for","startTime",1,"block","font-bold","mb-3"],["id","time","inputId","templatedisplay",1,"w-full",3,"ngModelChange","ngModel","appendTo","stepMinute","iconDisplay","showIcon","timeOnly","baseZIndex"],["for","endTime",1,"block","font-bold","mb-3"],["id","endTime","inputId","templatedisplay",1,"w-full",3,"ngModelChange","ngModel","appendTo","stepMinute","iconDisplay","showIcon","timeOnly"],[1,"text-red-500"],[1,"pi","pi-clock",3,"click"],["label","Cancelar","icon","pi pi-times","text","",3,"click"],["label","Guardar","icon","pi pi-check",3,"click"]],template:function(e,r){if(e&1){let n=h();a(0,"div",4)(1,"div",5),m(2,"Registro de Horas"),o(),a(3,"p-toolbar",6),_(4,Yr,1,0,"ng-template",null,0,C),o(),f(6,"app-table",7),o(),a(7,"p-dialog",8),x("visibleChange",function(g){return d(n),y(r.timeDialog,g)||(r.timeDialog=g),u(g)}),_(8,ra,34,28,"ng-template",null,1,C)(10,aa,2,0,"ng-template",null,2,C),o(),f(12,"p-toast")(13,"p-confirmdialog")}e&2&&(s(6),p("parentId","")("tableSettings",r.tableSettings)("footerValues",r.footerValues())("title","Administrar Horas")("data",r.hours()),s(),H(w(11,Jr)),v("visible",r.timeDialog),p("modal",!0),s(6),H(w(12,Xr)))},dependencies:[F,N,yt,vt,R,ie,A,L,Oe,k,W,Ye,Xe,Q,J,ee,U,z,te,Fe,Pe,Y,X,G,_e],encapsulation:2})};var fp=[{path:"crud",component:St},{path:"inventory",component:Et},{path:"employees",component:wt},{path:"settings",component:It},{path:"events",component:Dt},{path:"event-detail/:id",component:Vt,children:[{path:"quote",component:kt},{path:"bills",component:Nt},{path:"labour",component:Ht}]},{path:"**",redirectTo:"/notfound"}];export{fp as default};
